!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Vue")):"function"==typeof define&&define.amd?define(["Vue"],t):"object"==typeof exports?exports.VueFlow=t(require("Vue")):e.VueFlow=t(e.Vue)}(this,(e=>(()=>{"use strict";var t={508:t=>{t.exports=e}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};o.d(i,{default:()=>Vl});var r=o(508);function a(e){return!!(0,r.getCurrentScope)()&&((0,r.onScopeDispose)(e),!0)}function l(e){return"function"==typeof e?e():(0,r.unref)(e)}const u="undefined"!=typeof window&&"undefined"!=typeof document,s=Object.prototype.toString,c=()=>{},d=e=>e();function f(e,t=!1,n="Timeout"){return new Promise(((o,i)=>{t?setTimeout((()=>i(n)),e):setTimeout(o,e)}))}function h(e,t,n={}){const{eventFilter:o=d,...i}=n;return(0,r.watch)(e,(a=o,l=t,function(...e){return new Promise(((t,n)=>{Promise.resolve(a((()=>l.apply(this,e)),{fn:l,thisArg:this,args:e})).then(t).catch(n)}))}),i);var a,l}function p(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:a,pause:l,resume:u,isActive:s}=function(e=d){const t=(0,r.ref)(!0);return{isActive:(0,r.readonly)(t),pause:function(){t.value=!1},resume:function(){t.value=!0},eventFilter:(...n)=>{t.value&&e(...n)}}}(o);return{stop:h(e,t,{...i,eventFilter:a}),pause:l,resume:u,isActive:s}}function v(e,t={}){if(!(0,r.isRef)(e))return(0,r.toRefs)(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=(0,r.customRef)((()=>({get:()=>e.value[o],set(n){var i;if(null==(i=l(t.replaceRef))||i)if(Array.isArray(e.value)){const t=[...e.value];t[o]=n,e.value=t}else{const t={...e.value,[o]:n};Object.setPrototypeOf(t,Object.getPrototypeOf(e.value)),e.value=t}else e.value[o]=n}})));return n}function g(e,t=!1){function n(n,{flush:o="sync",deep:i=!1,timeout:a,throwOnTimeout:u}={}){let s=null;const c=[new Promise((a=>{s=(0,r.watch)(e,(e=>{n(e)!==t&&(null==s||s(),a(e))}),{flush:o,deep:i,immediate:!0})}))];return null!=a&&c.push(f(a,u).then((()=>l(e))).finally((()=>null==s?void 0:s()))),Promise.race(c)}function o(o,i){if(!(0,r.isRef)(o))return n((e=>e===o),i);const{flush:a="sync",deep:u=!1,timeout:s,throwOnTimeout:c}=null!=i?i:{};let d=null;const h=[new Promise((n=>{d=(0,r.watch)([e,o],(([e,o])=>{t!==(e===o)&&(null==d||d(),n(e))}),{flush:a,deep:u,immediate:!0})}))];return null!=s&&h.push(f(s,c).then((()=>l(e))).finally((()=>(null==d||d(),l(e))))),Promise.race(h)}function i(e){return a(1,e)}function a(e=1,t){let o=-1;return n((()=>(o+=1,o>=e)),t)}return Array.isArray(l(e))?{toMatch:n,toContains:function(e,t){return n((t=>{const n=Array.from(t);return n.includes(e)||n.includes(l(e))}),t)},changed:i,changedTimes:a,get not(){return g(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:function(e){return n((e=>Boolean(e)),e)},toBeNull:function(e){return o(null,e)},toBeNaN:function(e){return n(Number.isNaN,e)},toBeUndefined:function(e){return o(void 0,e)},changed:i,changedTimes:a,get not(){return g(e,!t)}}}function m(e){return g(e)}function y(e){var t;const n=l(e);return null!=(t=null==n?void 0:n.$el)?t:n}const w=u?window:void 0;function x(...e){let t,n,o,i;if("string"==typeof e[0]||Array.isArray(e[0])?([n,o,i]=e,t=w):[t,n,o,i]=e,!t)return c;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const u=[],d=()=>{u.forEach((e=>e())),u.length=0},f=(0,r.watch)((()=>[y(t),l(i)]),(([e,t])=>{if(d(),!e)return;const i=(r=t,"[object Object]"===s.call(r)?{...t}:t);var r;u.push(...n.flatMap((t=>o.map((n=>((e,t,n,o)=>(e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)))(e,t,n,i))))))}),{immediate:!0,flush:"post"}),h=()=>{f(),d()};return a(h),h}function _(...e){let t,n,o={};3===e.length?(t=e[0],n=e[1],o=e[2]):2===e.length?"object"==typeof e[1]?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=w,eventName:r="keydown",passive:a=!1,dedupe:u=!1}=o,s="function"==typeof(c=t)?c:"string"==typeof c?e=>e.key===c:Array.isArray(c)?e=>c.includes(e.key):()=>!0;var c;return x(i,r,(e=>{e.repeat&&l(u)||s(e)&&n(e)}),a)}function b(e,t,n,o={}){var i,a,l;const{clone:u=!1,passive:s=!1,eventName:c,deep:d=!1,defaultValue:f,shouldEmit:h}=o,p=(0,r.getCurrentInstance)(),v=n||(null==p?void 0:p.emit)||(null==(i=null==p?void 0:p.$emit)?void 0:i.bind(p))||(null==(l=null==(a=null==p?void 0:p.proxy)?void 0:a.$emit)?void 0:l.bind(null==p?void 0:p.proxy));let g=c;t||(t="modelValue"),g=g||`update:${t.toString()}`;const m=e=>{return u?"function"==typeof u?u(e):(t=e,JSON.parse(JSON.stringify(t))):e;var t},y=()=>void 0!==e[t]?m(e[t]):f,w=e=>{h?h(e)&&v(g,e):v(g,e)};if(s){const n=y(),o=(0,r.ref)(n);let i=!1;return(0,r.watch)((()=>e[t]),(e=>{i||(i=!0,o.value=m(e),(0,r.nextTick)((()=>i=!1)))})),(0,r.watch)(o,(n=>{i||n===e[t]&&!d||w(n)}),{deep:d}),o}return(0,r.computed)({get:()=>y(),set(e){w(e)}})}var E={value:()=>{}};function S(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new N(o)}function N(e){this._=e}function k(e,t){for(var n,o=0,i=e.length;o<i;++o)if((n=e[o]).name===t)return n.value}function C(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=E,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}N.prototype=S.prototype={constructor:N,on:function(e,t){var n,o,i=this._,r=(o=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,l=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(n=(e=r[a]).type)i[n]=C(i[n],e.name,t);else if(null==t)for(n in i)i[n]=C(i[n],e.name,null);return this}for(;++a<l;)if((n=(e=r[a]).type)&&(n=k(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new N(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,i=new Array(n),r=0;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=0,n=(o=this._[e]).length;r<n;++r)o[r].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};var M="http://www.w3.org/1999/xhtml";const I={svg:"http://www.w3.org/2000/svg",xhtml:M,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function P(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),I.hasOwnProperty(t)?{space:I[t],local:e}:e}function A(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===M&&t.documentElement.namespaceURI===M?t.createElement(e):t.createElementNS(n,e)}}function B(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function T(e){var t=P(e);return(t.local?B:A)(t)}function z(){}function D(e){return null==e?z:function(){return this.querySelector(e)}}function O(){return[]}function $(e){return null==e?O:function(){return this.querySelectorAll(e)}}function V(e){return function(){return this.matches(e)}}function R(e){return function(t){return t.matches(e)}}var L=Array.prototype.find;function H(){return this.firstElementChild}var Y=Array.prototype.filter;function G(){return Array.from(this.children)}function F(e){return new Array(e.length)}function X(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function U(e,t,n,o,i,r){for(var a,l=0,u=t.length,s=r.length;l<s;++l)(a=t[l])?(a.__data__=r[l],o[l]=a):n[l]=new X(e,r[l]);for(;l<u;++l)(a=t[l])&&(i[l]=a)}function j(e,t,n,o,i,r,a){var l,u,s,c=new Map,d=t.length,f=r.length,h=new Array(d);for(l=0;l<d;++l)(u=t[l])&&(h[l]=s=a.call(u,u.__data__,l,t)+"",c.has(s)?i[l]=u:c.set(s,u));for(l=0;l<f;++l)s=a.call(e,r[l],l,r)+"",(u=c.get(s))?(o[l]=u,u.__data__=r[l],c.delete(s)):n[l]=new X(e,r[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(h[l])===u&&(i[l]=u)}function W(e){return e.__data__}function Z(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function q(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function K(e){return function(){this.removeAttribute(e)}}function J(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Q(e,t){return function(){this.setAttribute(e,t)}}function ee(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function te(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function ne(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function oe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ie(e){return function(){this.style.removeProperty(e)}}function re(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ae(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function le(e,t){return e.style.getPropertyValue(t)||oe(e).getComputedStyle(e,null).getPropertyValue(t)}function ue(e){return function(){delete this[e]}}function se(e,t){return function(){this[e]=t}}function ce(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function de(e){return e.trim().split(/^|\s+/)}function fe(e){return e.classList||new he(e)}function he(e){this._node=e,this._names=de(e.getAttribute("class")||"")}function pe(e,t){for(var n=fe(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function ve(e,t){for(var n=fe(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function ge(e){return function(){pe(this,e)}}function me(e){return function(){ve(this,e)}}function ye(e,t){return function(){(t.apply(this,arguments)?pe:ve)(this,e)}}function we(){this.textContent=""}function xe(e){return function(){this.textContent=e}}function _e(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function be(){this.innerHTML=""}function Ee(e){return function(){this.innerHTML=e}}function Se(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Ne(){this.nextSibling&&this.parentNode.appendChild(this)}function ke(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ce(){return null}function Me(){var e=this.parentNode;e&&e.removeChild(this)}function Ie(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ae(e){return function(){var t=this.__on;if(t){for(var n,o=0,i=-1,r=t.length;o<r;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Be(e,t,n){return function(){var o,i=this.__on,r=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,l=i.length;a<l;++a)if((o=i[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),void(o.value=t);this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(o):this.__on=[o]}}function Te(e,t,n){var o=oe(e),i=o.CustomEvent;"function"==typeof i?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ze(e,t){return function(){return Te(this,e,t)}}function De(e,t){return function(){return Te(this,e,t.apply(this,arguments))}}X.prototype={constructor:X,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},he.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Oe=[null];function $e(e,t){this._groups=e,this._parents=t}function Ve(){return new $e([[document.documentElement]],Oe)}function Re(e){return"string"==typeof e?new $e([[document.querySelector(e)]],[document.documentElement]):new $e([[e]],Oe)}function Le(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}$e.prototype=Ve.prototype={constructor:$e,select:function(e){"function"!=typeof e&&(e=D(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a,l=t[i],u=l.length,s=o[i]=new Array(u),c=0;c<u;++c)(r=l[c])&&(a=e.call(r,r.__data__,c,l))&&("__data__"in r&&(a.__data__=r.__data__),s[c]=a);return new $e(o,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}(e):$(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a,l=t[r],u=l.length,s=0;s<u;++s)(a=l[s])&&(o.push(e.call(a,a.__data__,s,l)),i.push(a));return new $e(o,i)},selectChild:function(e){return this.select(null==e?H:function(e){return function(){return L.call(this.children,e)}}("function"==typeof e?e:R(e)))},selectChildren:function(e){return this.selectAll(null==e?G:function(e){return function(){return Y.call(this.children,e)}}("function"==typeof e?e:R(e)))},filter:function(e){"function"!=typeof e&&(e=V(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a=t[i],l=a.length,u=o[i]=[],s=0;s<l;++s)(r=a[s])&&e.call(r,r.__data__,s,a)&&u.push(r);return new $e(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,W);var n,o=t?j:U,i=this._parents,r=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=r.length,l=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var d=i[c],f=r[c],h=f.length,p=Z(e.call(d,d&&d.__data__,c,i)),v=p.length,g=u[c]=new Array(v),m=l[c]=new Array(v);o(d,f,g,m,s[c]=new Array(h),p,t);for(var y,w,x=0,_=0;x<v;++x)if(y=g[x]){for(x>=_&&(_=x+1);!(w=m[_])&&++_<v;);y._next=w||null}}return(l=new $e(l,i))._enter=u,l._exit=s,l},enter:function(){return new $e(this._enter||this._groups.map(F),this._parents)},exit:function(){return new $e(this._exit||this._groups.map(F),this._parents)},join:function(e,t,n){var o=this.enter(),i=this,r=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?r.remove():n(r),o&&i?o.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),l=new Array(i),u=0;u<a;++u)for(var s,c=n[u],d=o[u],f=c.length,h=l[u]=new Array(f),p=0;p<f;++p)(s=c[p]||d[p])&&(h[p]=s);for(;u<i;++u)l[u]=n[u];return new $e(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,i=e[t],r=i.length-1,a=i[r];--r>=0;)(o=i[r])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=q);for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a,l=n[r],u=l.length,s=i[r]=new Array(u),c=0;c<u;++c)(a=l[c])&&(s[c]=a);s.sort(t)}return new $e(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i,r=t[n],a=0,l=r.length;a<l;++a)(i=r[a])&&e.call(i,i.__data__,a,r);return this},attr:function(e,t){var n=P(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?J:K:"function"==typeof t?n.local?ne:te:n.local?ee:Q)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ie:"function"==typeof t?ae:re)(e,t,null==n?"":n)):le(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?ue:"function"==typeof t?ce:se)(e,t)):this.node()[e]},classed:function(e,t){var n=de(e+"");if(arguments.length<2){for(var o=fe(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?ye:t?ge:me)(n,t))},text:function(e){return arguments.length?this.each(null==e?we:("function"==typeof e?_e:xe)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?be:("function"==typeof e?Se:Ee)(e)):this.node().innerHTML},raise:function(){return this.each(Ne)},lower:function(){return this.each(ke)},append:function(e){var t="function"==typeof e?e:T(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:T(e),o=null==t?Ce:"function"==typeof t?t:D(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Me)},clone:function(e){return this.select(e?Pe:Ie)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,i,r=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=r.length;if(!(arguments.length<2)){for(l=t?Be:Ae,o=0;o<a;++o)this.each(l(r[o],t,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(o=0,u=l[s];o<a;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?De:ze)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,i=e[t],r=0,a=i.length;r<a;++r)(o=i[r])&&(yield o)}};const He={passive:!1},Ye={capture:!0,passive:!1};function Ge(e){e.stopImmediatePropagation()}function Fe(e){e.preventDefault(),e.stopImmediatePropagation()}function Xe(e){var t=e.document.documentElement,n=Re(e).on("dragstart.drag",Fe,Ye);"onselectstart"in t?n.on("selectstart.drag",Fe,Ye):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ue(e,t){var n=e.document.documentElement,o=Re(e).on("dragstart.drag",null);t&&(o.on("click.drag",Fe,Ye),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const je=e=>()=>e;function We(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:a,y:l,dx:u,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}function Ze(e){return!e.ctrlKey&&!e.button}function qe(){return this.parentNode}function Ke(e,t){return null==t?{x:e.x,y:e.y}:t}function Je(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qe(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function et(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function tt(){}We.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var nt=.7,ot=1/nt,it="\\s*([+-]?\\d+)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",at="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lt=/^#([0-9a-f]{3,8})$/,ut=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),st=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),ct=new RegExp(`^rgba\\(${it},${it},${it},${rt}\\)$`),dt=new RegExp(`^rgba\\(${at},${at},${at},${rt}\\)$`),ft=new RegExp(`^hsl\\(${rt},${at},${at}\\)$`),ht=new RegExp(`^hsla\\(${rt},${at},${at},${rt}\\)$`),pt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vt(){return this.rgb().formatHex()}function gt(){return this.rgb().formatRgb()}function mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=lt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?yt(t):3===n?new _t(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?wt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?wt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ut.exec(e))?new _t(t[1],t[2],t[3],1):(t=st.exec(e))?new _t(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ct.exec(e))?wt(t[1],t[2],t[3],t[4]):(t=dt.exec(e))?wt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ft.exec(e))?Ct(t[1],t[2]/100,t[3]/100,1):(t=ht.exec(e))?Ct(t[1],t[2]/100,t[3]/100,t[4]):pt.hasOwnProperty(e)?yt(pt[e]):"transparent"===e?new _t(NaN,NaN,NaN,0):null}function yt(e){return new _t(e>>16&255,e>>8&255,255&e,1)}function wt(e,t,n,o){return o<=0&&(e=t=n=NaN),new _t(e,t,n,o)}function xt(e,t,n,o){return 1===arguments.length?((i=e)instanceof tt||(i=mt(i)),i?new _t((i=i.rgb()).r,i.g,i.b,i.opacity):new _t):new _t(e,t,n,null==o?1:o);var i}function _t(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function bt(){return`#${kt(this.r)}${kt(this.g)}${kt(this.b)}`}function Et(){const e=St(this.opacity);return`${1===e?"rgb(":"rgba("}${Nt(this.r)}, ${Nt(this.g)}, ${Nt(this.b)}${1===e?")":`, ${e})`}`}function St(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kt(e){return((e=Nt(e))<16?"0":"")+e.toString(16)}function Ct(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new It(e,t,n,o)}function Mt(e){if(e instanceof It)return new It(e.h,e.s,e.l,e.opacity);if(e instanceof tt||(e=mt(e)),!e)return new It;if(e instanceof It)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,l=r-i,u=(r+i)/2;return l?(a=t===r?(n-o)/l+6*(n<o):n===r?(o-t)/l+2:(t-n)/l+4,l/=u<.5?r+i:2-r-i,a*=60):l=u>0&&u<1?0:a,new It(a,l,u,e.opacity)}function It(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function Pt(e){return(e=(e||0)%360)<0?e+360:e}function At(e){return Math.max(0,Math.min(1,e||0))}function Bt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Qe(tt,mt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vt,formatHex:vt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Mt(this).formatHsl()},formatRgb:gt,toString:gt}),Qe(_t,xt,et(tt,{brighter(e){return e=null==e?ot:Math.pow(ot,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?nt:Math.pow(nt,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _t(Nt(this.r),Nt(this.g),Nt(this.b),St(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bt,formatHex:bt,formatHex8:function(){return`#${kt(this.r)}${kt(this.g)}${kt(this.b)}${kt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Et,toString:Et})),Qe(It,(function(e,t,n,o){return 1===arguments.length?Mt(e):new It(e,t,n,null==o?1:o)}),et(tt,{brighter(e){return e=null==e?ot:Math.pow(ot,e),new It(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?nt:Math.pow(nt,e),new It(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new _t(Bt(e>=240?e-240:e+120,i,o),Bt(e,i,o),Bt(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new It(Pt(this.h),At(this.s),At(this.l),St(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=St(this.opacity);return`${1===e?"hsl(":"hsla("}${Pt(this.h)}, ${100*At(this.s)}%, ${100*At(this.l)}%${1===e?")":`, ${e})`}`}}));const Tt=e=>()=>e;function zt(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Tt(isNaN(e)?t:e)}const Dt=function e(t){var n=function(e){return 1==(e=+e)?zt:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):Tt(isNaN(t)?n:t)}}(t);function o(e,t){var o=n((e=xt(e)).r,(t=xt(t)).r),i=n(e.g,t.g),r=n(e.b,t.b),a=zt(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=i(t),e.b=r(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function Ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var $t=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vt=new RegExp($t.source,"g");function Rt(e,t){var n,o,i,r=$t.lastIndex=Vt.lastIndex=0,a=-1,l=[],u=[];for(e+="",t+="";(n=$t.exec(e))&&(o=Vt.exec(t));)(i=o.index)>r&&(i=t.slice(r,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:Ot(n,o)})),r=Vt.lastIndex;return r<t.length&&(i=t.slice(r),l[a]?l[a]+=i:l[++a]=i),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)l[(n=u[o]).i]=n.x(e);return l.join("")})}var Lt,Ht=180/Math.PI,Yt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gt(e,t,n,o,i,r){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*Ht,skewX:Math.atan(u)*Ht,scaleX:a,scaleY:l}}function Ft(e,t,n,o){function i(e){return e.length?e.pop()+" ":""}return function(r,a){var l=[],u=[];return r=e(r),a=e(a),function(e,o,i,r,a,l){if(e!==i||o!==r){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:Ot(e,i)},{i:u-2,x:Ot(o,r)})}else(i||r)&&a.push("translate("+i+t+r+n)}(r.translateX,r.translateY,a.translateX,a.translateY,l,u),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(i(n)+"rotate(",null,o)-2,x:Ot(e,t)})):t&&n.push(i(n)+"rotate("+t+o)}(r.rotate,a.rotate,l,u),function(e,t,n,r){e!==t?r.push({i:n.push(i(n)+"skewX(",null,o)-2,x:Ot(e,t)}):t&&n.push(i(n)+"skewX("+t+o)}(r.skewX,a.skewX,l,u),function(e,t,n,o,r,a){if(e!==n||t!==o){var l=r.push(i(r)+"scale(",null,",",null,")");a.push({i:l-4,x:Ot(e,n)},{i:l-2,x:Ot(t,o)})}else 1===n&&1===o||r.push(i(r)+"scale("+n+","+o+")")}(r.scaleX,r.scaleY,a.scaleX,a.scaleY,l,u),r=a=null,function(e){for(var t,n=-1,o=u.length;++n<o;)l[(t=u[n]).i]=t.x(e);return l.join("")}}}var Xt=Ft((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yt:Gt(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Ut=Ft((function(e){return null==e?Yt:(Lt||(Lt=document.createElementNS("http://www.w3.org/2000/svg","g")),Lt.setAttribute("transform",e),(e=Lt.transform.baseVal.consolidate())?Gt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Yt)}),", ",")",")");function jt(e){return((e=Math.exp(e))+1/e)/2}const Wt=function e(t,n,o){function i(e,i){var r,a,l=e[0],u=e[1],s=e[2],c=i[0],d=i[1],f=i[2],h=c-l,p=d-u,v=h*h+p*p;if(v<1e-12)a=Math.log(f/s)/t,r=function(e){return[l+e*h,u+e*p,s*Math.exp(t*e*a)]};else{var g=Math.sqrt(v),m=(f*f-s*s+o*v)/(2*s*n*g),y=(f*f-s*s-o*v)/(2*f*n*g),w=Math.log(Math.sqrt(m*m+1)-m),x=Math.log(Math.sqrt(y*y+1)-y);a=(x-w)/t,r=function(e){var o,i=e*a,r=jt(w),c=s/(n*g)*(r*(o=t*i+w,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[l+c*h,u+c*p,s*r/jt(t*i+w)]}}return r.duration=1e3*a*t/Math.SQRT2,r}return i.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},i}(Math.SQRT2,2,4);var Zt,qt,Kt=0,Jt=0,Qt=0,en=0,tn=0,nn=0,on="object"==typeof performance&&performance.now?performance:Date,rn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function an(){return tn||(rn(ln),tn=on.now()+nn)}function ln(){tn=0}function un(){this._call=this._time=this._next=null}function sn(e,t,n){var o=new un;return o.restart(e,t,n),o}function cn(){tn=(en=on.now())+nn,Kt=Jt=0;try{!function(){an(),++Kt;for(var e,t=Zt;t;)(e=tn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Kt}()}finally{Kt=0,function(){for(var e,t,n=Zt,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Zt=t);qt=e,fn(o)}(),tn=0}}function dn(){var e=on.now(),t=e-en;t>1e3&&(nn-=t,en=e)}function fn(e){Kt||(Jt&&(Jt=clearTimeout(Jt)),e-tn>24?(e<1/0&&(Jt=setTimeout(cn,e-on.now()-nn)),Qt&&(Qt=clearInterval(Qt))):(Qt||(en=on.now(),Qt=setInterval(dn,1e3)),Kt=1,rn(cn)))}function hn(e,t,n){var o=new un;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}un.prototype=sn.prototype={constructor:un,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?an():+n)+(null==t?0:+t),this._next||qt===this||(qt?qt._next=this:Zt=this,qt=this),this._call=e,this._time=n,fn()},stop:function(){this._call&&(this._call=null,this._time=1/0,fn())}};var pn=S("start","end","cancel","interrupt"),vn=[];function gn(e,t,n,o,i,r){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,i=e.__transition;function r(u){var s,c,d,f;if(1!==n.state)return l();for(s in i)if((f=i[s]).name===n.name){if(3===f.state)return hn(r);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[s]):+s<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[s])}if(hn((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(d=n.tween.length),s=0,c=-1;s<d;++s)(f=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=f);o.length=c+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),r=-1,a=o.length;++r<a;)o[r].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var o in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=sn((function(e){n.state=1,n.timer.restart(r,n.delay,n.time),n.delay<=e&&r(e-n.delay)}),0,n.time)}(e,n,{name:t,index:o,group:i,on:pn,tween:vn,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:0})}function mn(e,t){var n=wn(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function yn(e,t){var n=wn(e,t);if(n.state>3)throw new Error("too late; already running");return n}function wn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function xn(e,t){var n,o,i,r=e.__transition,a=!0;if(r){for(i in t=null==t?null:t+"",r)(n=r[i]).name===t?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]):a=!1;a&&delete e.__transition}}function _n(e,t){var n,o;return function(){var i=yn(this,e),r=i.tween;if(r!==n)for(var a=0,l=(o=n=r).length;a<l;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}i.tween=o}}function bn(e,t,n){var o,i;if("function"!=typeof n)throw new Error;return function(){var r=yn(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var l={name:t,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===t){i[u]=l;break}u===s&&i.push(l)}r.tween=i}}function En(e,t,n){var o=e._id;return e.each((function(){var e=yn(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return wn(e,o).value[t]}}function Sn(e,t){var n;return("number"==typeof t?Ot:t instanceof mt?Dt:(n=mt(t))?(t=n,Dt):Rt)(e,t)}function Nn(e){return function(){this.removeAttribute(e)}}function kn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cn(e,t,n){var o,i,r=n+"";return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function Mn(e,t,n){var o,i,r=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function In(e,t,n){var o,i,r;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(l=u+"")?null:a===o&&l===i?r:(i=l,r=t(o=a,u));this.removeAttribute(e)}}function Pn(e,t,n){var o,i,r;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===o&&l===i?r:(i=l,r=t(o=a,u));this.removeAttributeNS(e.space,e.local)}}function An(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Bn(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Tn(e,t){return function(){mn(this,e).delay=+t.apply(this,arguments)}}function zn(e,t){return t=+t,function(){mn(this,e).delay=t}}function Dn(e,t){return function(){yn(this,e).duration=+t.apply(this,arguments)}}function On(e,t){return t=+t,function(){yn(this,e).duration=t}}var $n=Ve.prototype.constructor;function Vn(e){return function(){this.style.removeProperty(e)}}var Rn=0;function Ln(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Hn(){return++Rn}var Yn=Ve.prototype;Ln.prototype={constructor:Ln,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=D(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var l,u,s=o[a],c=s.length,d=r[a]=new Array(c),f=0;f<c;++f)(l=s[f])&&(u=e.call(l,l.__data__,f,s))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,gn(d[f],t,n,f,d,wn(l,n)));return new Ln(r,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=$(e));for(var o=this._groups,i=o.length,r=[],a=[],l=0;l<i;++l)for(var u,s=o[l],c=s.length,d=0;d<c;++d)if(u=s[d]){for(var f,h=e.call(u,u.__data__,d,s),p=wn(u,n),v=0,g=h.length;v<g;++v)(f=h[v])&&gn(f,t,n,v,h,p);r.push(h),a.push(u)}return new Ln(r,a,t,n)},selectChild:Yn.selectChild,selectChildren:Yn.selectChildren,filter:function(e){"function"!=typeof e&&(e=V(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a=t[i],l=a.length,u=o[i]=[],s=0;s<l;++s)(r=a[s])&&e.call(r,r.__data__,s,a)&&u.push(r);return new Ln(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),l=0;l<r;++l)for(var u,s=t[l],c=n[l],d=s.length,f=a[l]=new Array(d),h=0;h<d;++h)(u=s[h]||c[h])&&(f[h]=u);for(;l<o;++l)a[l]=t[l];return new Ln(a,this._parents,this._name,this._id)},selection:function(){return new $n(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Hn(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a,l=o[r],u=l.length,s=0;s<u;++s)if(a=l[s]){var c=wn(a,t);gn(a,e,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ln(o,this._parents,e,n)},call:Yn.call,nodes:Yn.nodes,node:Yn.node,size:Yn.size,empty:Yn.empty,each:Yn.each,on:function(e,t){var n=this._id;return arguments.length<2?wn(this.node(),n).on.on(e):this.each(function(e,t,n){var o,i,r=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?mn:yn;return function(){var a=r(this,e),l=a.on;l!==o&&(i=(o=l).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=P(e),o="transform"===n?Ut:Sn;return this.attrTween(e,"function"==typeof t?(n.local?Pn:In)(n,o,En(this,"attr."+e,t)):null==t?(n.local?kn:Nn)(n):(n.local?Mn:Cn)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=P(e);return this.tween(n,(o.local?An:Bn)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?Xt:Sn;return null==t?this.styleTween(e,function(e,t){var n,o,i;return function(){var r=le(this,e),a=(this.style.removeProperty(e),le(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}(e,o)).on("end.style."+e,Vn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,i,r;return function(){var a=le(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=le(this,e)),a===u?null:a===o&&u===i?r:(i=u,r=t(o=a,l))}}(e,o,En(this,"style."+e,t))).each(function(e,t){var n,o,i,r,a="style."+t,l="end."+a;return function(){var u=yn(this,e),s=u.on,c=null==u.value[a]?r||(r=Vn(t)):void 0;s===n&&i===c||(o=(n=s).copy()).on(l,i=c),u.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,i,r=n+"";return function(){var a=le(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,i;function r(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,r,n)),o}return r._value=t,r}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(En(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,i=wn(this.node(),n).tween,r=0,a=i.length;r<a;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((null==t?_n:bn)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Tn:zn)(t,e)):wn(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Dn:On)(t,e)):wn(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){yn(this,e).ease=t}}(t,e)):wn(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;yn(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,i=n.size();return new Promise((function(r,a){var l={value:a},u={value:function(){0==--i&&r()}};n.each((function(){var n=yn(this,o),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t})),0===i&&r()}))},[Symbol.iterator]:Yn[Symbol.iterator]};var Gn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Fn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Ve.prototype.interrupt=function(e){return this.each((function(){xn(this,e)}))},Ve.prototype.transition=function(e){var t,n;e instanceof Ln?(t=e._id,e=e._name):(t=Hn(),(n=Gn).time=an(),e=null==e?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a,l=o[r],u=l.length,s=0;s<u;++s)(a=l[s])&&gn(a,e,t,s,l,n||Fn(a,t));return new Ln(o,this._parents,e,t)};const Xn=e=>()=>e;function Un(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function jn(e,t,n){this.k=e,this.x=t,this.y=n}jn.prototype={constructor:jn,scale:function(e){return 1===e?this:new jn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new jn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wn=new jn(1,0,0);function Zn(e){e.stopImmediatePropagation()}function qn(e){e.preventDefault(),e.stopImmediatePropagation()}function Kn(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Jn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Qn(){return this.__zoom||Wn}function eo(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function to(){return navigator.maxTouchPoints||"ontouchstart"in this}function no(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}jn.prototype;var oo=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(oo||{}),io=(e=>(e.Partial="partial",e.Full="full",e))(io||{}),ro=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(ro||{}),ao=(e=>(e.Strict="strict",e.Loose="loose",e))(ao||{}),lo=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(lo||{}),uo=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(uo||{});function so(e){var t,n;const o=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target,i="function"==typeof(null==o?void 0:o.hasAttribute)&&o.hasAttribute("contenteditable"),r="function"==typeof(null==o?void 0:o.closest)?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(null==o?void 0:o.nodeName)||i||!!r}function co(e,t,n,o){const i=t.replace("+","\n").replace("\n\n","\n+").split("\n").map((e=>e.trim().toLowerCase()));if(1===i.length)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const r=i.every(((e,t)=>n.has(e)&&Array.from(n.values())[t]===i[t]));return o&&n.delete(e.toLowerCase()),r}function fo(e,t){const n=(0,r.toRef)((()=>(0,r.toValue)(null==t?void 0:t.actInsideInputWithModifier)??!1)),o=(0,r.toRef)((()=>(0,r.toValue)(null==t?void 0:t.target)??window)),i=(0,r.ref)(!0===(0,r.toValue)(e));let a=!1;const l=new Set;let u=c((0,r.toValue)(e));function s(){a=!1,l.clear(),i.value=!0===(0,r.toValue)(e)}function c(e){return null===e?(s(),()=>!1):"boolean"==typeof e?(s(),i.value=e,()=>!1):Array.isArray(e)||"string"==typeof e?function(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=(i=n.code,e.includes(i)?"code":"key");var i;return Array.isArray(e)?e.some((e=>co(n[o],e,t,"keyup"===n.type))):co(n[o],e,t,"keyup"===n.type)}}(e,l):e}return(0,r.watch)((()=>(0,r.toValue)(e)),((e,t)=>{"boolean"==typeof t&&"boolean"!=typeof e&&s(),u=c(e)}),{immediate:!0}),x(["blur","contextmenu"],s),_(((...e)=>u(...e)),(e=>{var t;a=(t=e).ctrlKey||t.metaKey||t.shiftKey,(!a||a&&!n.value)&&so(e)||(e.preventDefault(),i.value=!0)}),{eventName:"keydown",target:o}),_(((...e)=>u(...e)),(e=>{if(i.value){if((!a||a&&!n.value)&&so(e))return;a=!1,i.value=!1}}),{eventName:"keyup",target:o}),i}const ho="vue-flow__node-desc",po="vue-flow__edge-desc",vo=["Enter"," ","Escape"],go={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function mo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function yo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function wo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function xo(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function _o(e,t){return{x:xo(e.x,t[0][0],t[1][0]),y:xo(e.y,t[0][1],t[1][1])}}function bo(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Eo(e){return e&&"object"==typeof e&&"id"in e&&"source"in e&&"target"in e}function So(e){return e&&"object"==typeof e&&"id"in e&&"position"in e&&!Eo(e)}function No(e){return So(e)&&"computedPosition"in e}function ko(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Co(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:(0,r.markRaw)({width:0,height:0}),computedPosition:(0,r.markRaw)({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:bi(e.data)?e.data:{},events:(0,r.markRaw)(bi(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Mo(e,t,n){var o,i;const a={id:e.id.toString(),type:e.type??(null==t?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:null==(o=e.sourceHandle)?void 0:o.toString(),targetHandle:null==(i=e.targetHandle)?void 0:i.toString(),updatable:e.updatable??(null==n?void 0:n.updatable),selectable:e.selectable??(null==n?void 0:n.selectable),focusable:e.focusable??(null==n?void 0:n.focusable),data:bi(e.data)?e.data:{},events:(0,r.markRaw)(bi(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(null==n?void 0:n.interactionWidth),...n??{}};return Object.assign(t??a,e,{id:e.id.toString()})}function Io(e,t,n,o){const i="string"==typeof e?e:e.id,r=new Set,a="source"===o?"target":"source";for(const e of n)e[a]===i&&r.add(e[o]);return t.filter((e=>r.has(e.id)))}function Po({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function Ao({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Bo({x:e,y:t},{x:n,y:o,zoom:i},r=!1,a=[1,1]){const l={x:(e-n)/i,y:(t-o)/i};return r?di(l,a):l}function To({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function zo(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let i=0;i<e.length;i++){const r=e[i];n=t,o=To({...r.computedPosition,...r.dimensions}),t={x:Math.min(n.x,o.x),y:Math.min(n.y,o.y),x2:Math.max(n.x2,o.x2),y2:Math.max(n.y2,o.y2)}}var n,o;return function({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}(t)}function Do(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const r={...Bo(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const t of e){const{dimensions:e,selectable:n=!0,hidden:l=!1}=t,u=e.width??t.width??null,s=e.height??t.height??null;if(i&&!n||l)continue;const c=yo(r,mo(t));(null===u||null===s||o&&c>0||c>=(u??0)*(s??0)||t.dragging)&&a.push(t)}return a}function Oo(e,t){const n=new Set;if("string"==typeof e)n.add(e);else if(e.length>=1)for(const t of e)n.add(t.id);return t.filter((e=>n.has(e.source)||n.has(e.target)))}function $o(e,t,n,o,i,r=.1,a={x:0,y:0}){const l=t/(e.width*(1+r)),u=n/(e.height*(1+r)),s=xo(Math.min(l,u),o,i),c=e.x+e.width/2,d=e.y+e.height/2;return{x:t/2-c*s+(a.x??0),y:n/2-d*s+(a.y??0),zoom:s}}function Vo(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return!!n&&(!!n.selected||Vo(n,t))}function Ro(e,t){return void 0===e?"":"string"==typeof e?e:`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}function Lo(e,t,n){return e<t?xo(Math.abs(e-t),1,t)/t:e>n?-xo(Math.abs(e-n),1,t)/t:0}function Ho(e,t,n=15,o=40){return[Lo(e.x,o,t.width-o)*n,Lo(e.y,o,t.height-o)*n]}function Yo(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if("function"==typeof t.style?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if("string"==typeof i.width){const e=Number(i.width.replace("px",""));i.width=`${e+n}px`}else i.width+=n;if(o>0)if("string"==typeof i.height){const e=Number(i.height.replace("px",""));i.height=`${e+o}px`}else i.height+=o;if(e.position.x<0){const n=Math.abs(e.position.x);if(t.position.x=t.position.x-n,"string"==typeof i.width){const e=Number(i.width.replace("px",""));i.width=`${e+n}px`}else i.width+=n;e.position.x=0}if(e.position.y<0){const n=Math.abs(e.position.y);if(t.position.y=t.position.y-n,"string"==typeof i.height){const e=Number(i.height.replace("px",""));i.height=`${e+n}px`}else i.height+=n;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),"function"==typeof t.style?t.style=e=>({...(0,t.style)(e),...i}):t.style={...t.style,...i}}}}function Go(e,t){var n,o;const i=e.filter((e=>"add"===e.type||"remove"===e.type));for(const e of i)if("add"===e.type)-1===t.findIndex((t=>t.id===e.item.id))&&t.push(e.item);else if("remove"===e.type){const n=t.findIndex((t=>t.id===e.id));-1!==n&&t.splice(n,1)}const a=t.map((e=>e.id));for(const i of t)for(const l of e)if(l.id===i.id)switch(l.type){case"select":i.selected=l.selected;break;case"position":if(No(i)&&(void 0!==l.position&&(i.position=l.position),void 0!==l.dragging&&(i.dragging=l.dragging),i.expandParent&&i.parentNode)){const e=t[a.indexOf(i.parentNode)];e&&No(e)&&Yo(i,e)}break;case"dimensions":if(No(i)&&(void 0!==l.dimensions&&(i.dimensions=l.dimensions),void 0!==l.updateStyle&&l.updateStyle&&(i.style={...i.style||{},width:`${null==(n=l.dimensions)?void 0:n.width}px`,height:`${null==(o=l.dimensions)?void 0:o.height}px`}),void 0!==l.resizing&&(i.resizing=l.resizing),i.expandParent&&i.parentNode)){const e=t[a.indexOf(i.parentNode)];e&&No(e)&&(e.dimensions.width&&e.dimensions.height?Yo(i,e):(0,r.nextTick)((()=>{Yo(i,e)})))}}return t}function Fo(e,t){return{id:e,type:"select",selected:t}}function Xo(e){return{item:e,type:"add"}}function Uo(e){return{id:e,type:"remove"}}function jo(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function Wo(e,t=new Set,n=!1){const o=[];for(const[i,r]of e){const e=t.has(i);void 0===r.selected&&!e||r.selected===e||(n&&(r.selected=e),o.push(Fo(r.id,e)))}return o}function Zo(e){const t=new Set;let n=!1;e&&(n=!0,t.add(e));const o=e=>{t.delete(e)};return{on:i=>{e&&n&&t.delete(e),t.add(i);const r=()=>{o(i),e&&n&&t.add(e)};return a(r),{off:r}},off:o,trigger:e=>Promise.all(Array.from(t).map((t=>t(e)))),hasListeners:()=>t.size>0,fns:t}}function qo(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Ko({id:e,dragItems:t,findNode:n}){const o=[];for(const e of t){const t=n(e.id);t&&o.push(t)}return[e?o.find((t=>t.id===e)):o[0],o]}function Jo(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Qo(e,t,n,o,i){const r=_o(t,function({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}(e.dimensions,function(e,t,n,o){let i=e.extent||n;if("parent"!==i&&(Array.isArray(i)||"parent"!==(null==i?void 0:i.range))||e.expandParent){if(Array.isArray(i)){const e=(null==o?void 0:o.computedPosition.x)||0,t=(null==o?void 0:o.computedPosition.y)||0;i=[[i[0][0]+e,i[0][1]+t],[i[1][0]+e,i[1][1]+t]]}else if("parent"!==i&&(null==i?void 0:i.range)&&Array.isArray(i.range)){const[e,t,n,r]=Jo(i.padding),a=(null==o?void 0:o.computedPosition.x)||0,l=(null==o?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+a+r,i.range[0][1]+l+e],[i.range[1][0]+a-t,i.range[1][1]+l-n]]}}else if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const e=function(e,t,n){const[o,i,r,a]="string"!=typeof e?Jo(e.padding):[0,0,0,0];return!(!n||void 0===n.computedPosition.x||void 0===n.computedPosition.y||void 0===n.dimensions.width||void 0===n.dimensions.height)&&[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]}(i,0,o);e&&(i=e)}else t(new ai(ii.NODE_EXTENT_INVALID,e.id)),i=n;return"parent"===i?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}(e,n,o,i)));return{position:{x:r.x-((null==i?void 0:i.computedPosition.x)||0),y:r.y-((null==i?void 0:i.computedPosition.y)||0)},computedPosition:r}}function ei(e,t,n=oo.Left,o=!1){const i=((null==t?void 0:t.x)??0)+e.computedPosition.x,r=((null==t?void 0:t.y)??0)+e.computedPosition.y,{width:a,height:l}=t??function(e){var t,n;return{width:(null==(t=e.dimensions)?void 0:t.width)??e.width??0,height:(null==(n=e.dimensions)?void 0:n.height)??e.height??0}}(e);if(o)return{x:i+a/2,y:r+l/2};switch((null==t?void 0:t.position)??n){case oo.Top:return{x:i+a/2,y:r};case oo.Right:return{x:i+a,y:r+l/2};case oo.Bottom:return{x:i+a/2,y:r+l};case oo.Left:return{x:i,y:r+l/2}}}function ti(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function ni({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:a,height:l,viewport:u}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c=To({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:a/u.zoom,height:l/u.zoom}),d=Math.max(0,Math.min(c.x2,s.x2)-Math.max(c.x,s.x)),f=Math.max(0,Math.min(c.y2,s.y2)-Math.max(c.y,s.y));return Math.ceil(d*f)>0}function oi(e,t,n=!1){const o="number"==typeof e.zIndex;let i=o?e.zIndex:0;const r=t(e.source),a=t(e.target);return r&&a?(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,a.computedPosition.z||0)),i):0}var ii=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(ii||{});const ri={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid\nNode: ${e}`,NODE_NOT_FOUND:e=>`Node not found\nNode: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent\nNode: ${e}\nParent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing\nType: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent\nNode: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target\nEdge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing\nEdge: ${e} \nSource: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing\nEdge: ${e} \nTarget: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing\nType: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed\nEdge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found\nEdge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class ai extends Error{constructor(e,...t){var n;super(null==(n=ri[e])?void 0:n.call(ri,...t)),this.name="VueFlowError",this.code=e,this.args=t}}function li(e){return"clientX"in e}function ui(e){return"sourceEvent"in e}function si(e,t){var n,o;const i=li(e),r=i?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,a=i?e.clientY:null==(o=e.touches)?void 0:o[0].clientY;return{x:r-((null==t?void 0:t.left)??0),y:a-((null==t?void 0:t.top)??0)}}const ci=()=>{var e;return"undefined"!=typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0};function di(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const fi=()=>!0;function hi(e){null==e||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function pi(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:r,doc:a,lib:l,flowId:u,isValidConnection:s=fi},c,d,f){const h="target"===r,p=t?a.querySelector(`.${l}-flow__handle[data-id="${u}-${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`):null,{x:v,y:g}=si(e),m=a.elementFromPoint(v,g),y=(null==m?void 0:m.classList.contains(`${l}-flow__handle`))?m:p,w={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const e=vi(void 0,y),r=y.getAttribute("data-nodeid"),a=y.getAttribute("data-handleid"),l=y.classList.contains("connectable"),u=y.classList.contains("connectableend");if(!r||!e)return w;const p={source:h?r:o,sourceHandle:h?a:i,target:h?o:r,targetHandle:h?i:a};w.connection=p;const v=l&&u&&(n===ao.Strict?h&&"source"===e||!h&&"target"===e:r!==o||a!==i);w.isValid=v&&s(p,{nodes:d,edges:c,sourceNode:f(o),targetNode:f(r)}),w.toHandle=t}return w}function vi(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}const gi={[oo.Left]:oo.Right,[oo.Right]:oo.Left,[oo.Top]:oo.Bottom,[oo.Bottom]:oo.Top},mi=["production","prod"];function yi(e,...t){wi()&&console.warn(`[Vue Flow]: ${e}`,...t)}function wi(){return!mi.includes("production")}function xi(e,t,n,o){const i=t.querySelectorAll(`.vue-flow__handle.${e}`);return Array.from(i).map((t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),position:t.getAttribute("data-handlepos"),nodeId:t.getAttribute("data-nodeid"),type:e,x:(i.left-n.left)/o,y:(i.top-n.top)/o,...wo(t)}}))}function _i(e,t,n,o,i,a=!1,l){i.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),(0,r.nextTick)((()=>{l.blur()}))):n([e])}function bi(e){return void 0!==(0,r.unref)(e)}function Ei(e,t,n,o){if(!e||!e.source||!e.target)return n(new ai(ii.EDGE_INVALID,(null==e?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return i=Eo(e)?e:{...e,id:Po(e)},i=Mo(i,void 0,o),!function(e,t){return t.some((t=>Eo(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))}(i,t)&&i}function Si(e,t,n){const o={},i=[];for(let r=0;r<e.length;++r){const a=e[r];if(!So(a)){n(new ai(ii.NODE_INVALID,null==a?void 0:a.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const l=Co(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),i[r]=l}for(const e of i){const r=t(e.parentNode)||i.find((t=>t.id===e.parentNode));e.parentNode&&!r&&n(new ai(ii.NODE_MISSING_PARENT,e.id,e.parentNode)),(e.parentNode||o[e.id])&&(o[e.id]&&(e.isParent=!0),r&&(r.isParent=!0))}return i}function Ni(e,t,n,o,i,r){let a=i;const l=o.get(a)||new Map;o.set(a,l.set(n,t)),a=`${i}-${e}`;const u=o.get(a)||new Map;if(o.set(a,u.set(n,t)),r){a=`${i}-${e}-${r}`;const l=o.get(a)||new Map;o.set(a,l.set(n,t))}}function ki(e,t,n){e.clear(),t.clear();for(const o of n){const{source:n,target:i,sourceHandle:r=null,targetHandle:a=null}=o,l={edgeId:o.id,source:n,target:i,sourceHandle:r,targetHandle:a},u=`${n}-${r}--${i}-${a}`;Ni("source",l,`${i}-${a}--${n}-${r}`,e,n,r),Ni("target",l,u,e,i,a),t.set(o.id,o)}}function Ci(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Mi(e,t,n,o,i,r,a,l){const u=[];for(const s of e){const e=Eo(s)?s:Ei(s,l,i,r);if(!e)continue;const c=n(e.source),d=n(e.target);if(!c||!d){i(new ai(ii.EDGE_SOURCE_TARGET_MISSING,e.id,e.source,e.target));continue}if(!c){i(new ai(ii.EDGE_SOURCE_MISSING,e.id,e.source));continue}if(!d){i(new ai(ii.EDGE_TARGET_MISSING,e.id,e.target));continue}if(t&&!t(e,{edges:l,nodes:a,sourceNode:c,targetNode:d})){i(new ai(ii.EDGE_INVALID,e.id));continue}const f=o(e.id);u.push({...Mo(e,f,r),sourceNode:c,targetNode:d})}return u}const Ii=Symbol("vueFlow"),Pi=Symbol("nodeId"),Ai=Symbol("nodeRef"),Bi=Symbol("edgeId"),Ti=Symbol("edgeRef"),zi=Symbol("slots");function Di(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:a,nodeExtent:l,nodeDragThreshold:u,viewport:s,autoPanOnNodeDrag:c,autoPanSpeed:d,nodesDraggable:f,panBy:h,findNode:p,multiSelectionActive:v,nodesSelectionActive:g,selectNodesOnDrag:m,removeSelectedElements:y,addSelectedNodes:w,updateNodePositions:x,emits:_}=kr(),{onStart:b,onDrag:E,onStop:N,onClick:k,el:C,disabled:M,id:I,selectable:P,dragHandle:A}=e,B=(0,r.ref)(!1);let T,z=[],D=null,O={x:void 0,y:void 0},$={x:0,y:0},V=null,R=!1,L=0,H=!1;const Y=Oi(),G=({x:e,y:t})=>{O={x:e,y:t};let i=!1;if(z=z.map((r=>{const a={x:e-r.distance.x,y:t-r.distance.y},{computedPosition:u}=Qo(r,n.value?di(a,o.value):a,_.error,l.value,r.parentNode?p(r.parentNode):void 0);return i=i||r.position.x!==u.x||r.position.y!==u.y,r.position=u,r})),i&&(x(z,!0,!0),B.value=!0,V)){const[e,t]=Ko({id:I,dragItems:z,findNode:p});E({event:V,node:e,nodes:t})}},F=()=>{if(!D)return;const[e,t]=Ho($,D,d.value);if(0!==e||0!==t){const n={x:(O.x??0)-e/s.value.zoom,y:(O.y??0)-t/s.value.zoom};h({x:e,y:t})&&G(n)}L=requestAnimationFrame(F)},X=(e,t)=>{R=!0;const n=p(I);m.value||v.value||!n||n.selected||y(),n&&(0,r.toValue)(P)&&m.value&&_i(n,v.value,w,y,g,!1,t);const o=Y(e.sourceEvent);if(O=o,z=function(e,t,n,o,i){var a,l;const u=[];for(const s of e)!s.selected&&s.id!==i||s.parentNode&&Vo(s,o)||!(s.draggable||t&&void 0===s.draggable)||u.push((0,r.markRaw)({id:s.id,position:s.position||{x:0,y:0},distance:{x:n.x-(null==(a=s.computedPosition)?void 0:a.x)||0,y:n.y-(null==(l=s.computedPosition)?void 0:l.y)||0},from:s.computedPosition,extent:s.extent,parentNode:s.parentNode,dimensions:s.dimensions,expandParent:s.expandParent}));return u}(a.value,f.value,o,p,I),z.length){const[t,n]=Ko({id:I,dragItems:z,findNode:p});b({event:e.sourceEvent,node:t,nodes:n})}};return(0,r.watch)([()=>(0,r.toValue)(M),C],(([e,n],o,a)=>{if(n){const o=Re(n);e||(T=function(){var e,t,n,o,i=Ze,r=qe,a=Ke,l=Je,u={},s=S("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",g).on("touchmove.drag",m,He).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,l){if(!o&&i.call(this,a,l)){var u=w(this,r.call(this,a,l),a,l,"mouse");u&&(Re(a.view).on("mousemove.drag",p,Ye).on("mouseup.drag",v,Ye),Xe(a.view),Ge(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function p(o){if(Fe(o),!n){var i=o.clientX-e,r=o.clientY-t;n=i*i+r*r>d}u.mouse("drag",o)}function v(e){Re(e.view).on("mousemove.drag mouseup.drag",null),Ue(e.view,n),Fe(e),u.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,o,a=e.changedTouches,l=r.call(this,e,t),u=a.length;for(n=0;n<u;++n)(o=w(this,l,e,t,a[n].identifier,a[n]))&&(Ge(e),o("start",e,a[n]))}}function m(e){var t,n,o=e.changedTouches,i=o.length;for(t=0;t<i;++t)(n=u[o[t].identifier])&&(Fe(e),n("drag",e,o[t]))}function y(e){var t,n,i=e.changedTouches,r=i.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<r;++t)(n=u[i[t].identifier])&&(Ge(e),n("end",e,i[t]))}function w(e,t,n,o,i,r){var l,d,h,p=s.copy(),v=Le(r||n,t);if(null!=(h=a.call(e,new We("beforestart",{sourceEvent:n,target:f,identifier:i,active:c,x:v[0],y:v[1],dx:0,dy:0,dispatch:p}),o)))return l=h.x-v[0]||0,d=h.y-v[1]||0,function n(r,a,s){var g,m=v;switch(r){case"start":u[i]=n,g=c++;break;case"end":delete u[i],--c;case"drag":v=Le(s||a,t),g=c}p.call(r,e,new We(r,{sourceEvent:a,subject:h,target:f,identifier:i,active:g,x:v[0]+l,y:v[1]+d,dx:v[0]-m[0],dy:v[1]-m[1],dispatch:p}),o)}}return f.filter=function(e){return arguments.length?(i="function"==typeof e?e:je(!!e),f):i},f.container=function(e){return arguments.length?(r="function"==typeof e?e:je(e),f):r},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:je(e),f):a},f.touchable=function(e){return arguments.length?(l="function"==typeof e?e:je(!!e),f):l},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}().on("start",(e=>((e,n)=>{var o;"touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||(0===u.value&&X(e,n),O=Y(e.sourceEvent),D=(null==(o=t.value)?void 0:o.getBoundingClientRect())||null,$=si(e.sourceEvent,D))})(e,n))).on("drag",(e=>((e,t)=>{const n=Y(e.sourceEvent);if(!H&&R&&c.value&&(H=!0,F()),!R){const o=n.xSnapped-(O.x??0),i=n.ySnapped-(O.y??0);Math.sqrt(o*o+i*i)>u.value&&X(e,t)}(O.x!==n.xSnapped||O.y!==n.ySnapped)&&z.length&&R&&(V=e.sourceEvent,$=si(e.sourceEvent,D),G(n))})(e,n))).on("end",(e=>(e=>{if(ui(e)||R||B.value||v.value){if(B.value=!1,H=!1,R=!1,O={x:void 0,y:void 0},cancelAnimationFrame(L),z.length){x(z,!1,!1);const[t,n]=Ko({id:I,dragItems:z,findNode:p});N({event:e.sourceEvent,node:t,nodes:n})}}else{const t=e,n=Y(t),o=n.xSnapped-(O.x??0),i=n.ySnapped-(O.y??0),r=Math.sqrt(o*o+i*i);0!==r&&r<=u.value&&(null==k||k(t))}})(e))).filter((e=>{const t=e.target,o=(0,r.toValue)(A);return!e.button&&(!i.value||!qo(t,`.${i.value}`,n)&&(!o||qo(t,o,n)))})),o.call(T)),a((()=>{o.on(".drag",null),T&&(T.on("start",null),T.on("drag",null),T.on("end",null))}))}})),B}function Oi(){const{viewport:e,snapGrid:t,snapToGrid:n}=kr();return o=>{const i=ui(o)?o.sourceEvent:o,{x:r,y:a}=si(i),l=Bo({x:r,y:a},e.value),{x:u,y:s}=n.value?di(l,t.value):l;return{xSnapped:u,ySnapped:s,...l}}}function $i(){return!0}function Vi({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:l}){const{id:u,vueFlowRef:s,connectionMode:c,connectionRadius:d,connectOnClick:f,connectionClickStartHandle:h,nodesConnectable:p,autoPanOnConnect:v,autoPanSpeed:g,findNode:m,panBy:y,startConnection:w,updateConnection:x,endConnection:_,emits:b,viewport:E,edges:S,nodes:N,isValidConnection:k,nodeLookup:C}=kr();let M=null,I=!1,P=null;return{handlePointerDown:function(f){var h;const p="target"===(0,r.toValue)(n),A=li(f),B=bo(f.target);if(A&&0===f.button||!A){let n=function(n){F=si(n,H),z=function(e,t,n,o){var i,r;let a=[],l=Number.POSITIVE_INFINITY;const u=function(e,t,n){const o=[],i={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const e of t.values())yo(i,mo(e))>0&&o.push(e);return o}(e,n,t+250);for(const n of u){const u=[...(null==(i=n.handleBounds)?void 0:i.source)??[],...(null==(r=n.handleBounds)?void 0:r.target)??[]];for(const i of u){if(o.nodeId===i.nodeId&&o.type===i.type&&o.id===i.id)continue;const{x:r,y:u}=ei(n,i,i.position,!0),s=Math.sqrt((r-e.x)**2+(u-e.y)**2);s>t||(s<l?(a=[{...i,x:r,y:u}],l=s):s===l&&a.push({...i,x:r,y:u}))}}if(!a.length)return null;if(a.length>1){const e="source"===o.type?"target":"source";return a.find((t=>t.type===e))??a[0]}return a[0]}(Bo(F,E.value,!1,[1,1]),d.value,C.value,j),X||(U(),X=!0);const o=pi(n,{handle:z,connectionMode:c.value,fromNodeId:(0,r.toValue)(t),fromHandleId:(0,r.toValue)(e),fromType:p?"target":"source",isValidConnection:D,doc:B,lib:"vue",flowId:u,nodeLookup:C.value},S.value,N.value,m);P=o.handleDomNode,M=o.connection,I=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!z,o.isValid);const i={...q,isValid:I,to:z&&I?Ao({x:z.x,y:z.y},E.value):F,toHandle:o.toHandle,toPosition:I&&o.toHandle?o.toHandle.position:gi[j.position],toNode:o.toHandle?C.value.get(o.toHandle.nodeId):null};if(!(I&&z&&(null==q?void 0:q.toHandle)&&i.toHandle&&q.toHandle.type===i.toHandle.type&&q.toHandle.nodeId===i.toHandle.nodeId&&q.toHandle.id===i.toHandle.id&&q.to.x===i.to.x&&q.to.y===i.to.y)){if(x(z&&I?Ao({x:z.x,y:z.y},E.value):F,o.toHandle,function(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}(!!z,I)),q=i,!z&&!I&&!P)return hi(G);M&&M.source!==M.target&&P&&(hi(G),G=P,P.classList.add("connecting","vue-flow__handle-connecting"),P.classList.toggle("valid",!!I),P.classList.toggle("vue-flow__handle-valid",!!I))}},A=function(e){(z||P)&&M&&I&&(a?a(e,M):b.connect(M)),b.connectEnd(e),i&&(null==l||l(e)),hi(G),cancelAnimationFrame(O),_(e),X=!1,I=!1,M=null,P=null,B.removeEventListener("mousemove",n),B.removeEventListener("mouseup",A),B.removeEventListener("touchmove",n),B.removeEventListener("touchend",A)};const T=m((0,r.toValue)(t));let z,D=(0,r.toValue)(o)||k.value||$i;!D&&T&&(D=(p?T.isValidSourcePos:T.isValidTargetPos)||$i);let O=0;const{x:$,y:V}=si(f),R=null==B?void 0:B.elementFromPoint($,V),L=vi((0,r.toValue)(i),R),H=null==(h=s.value)?void 0:h.getBoundingClientRect();if(!H||!L)return;const Y=function(e,t,n,o,i,r=!1){var a,l,u;const s=o.get(e);if(!s)return null;const c=i===ao.Strict?null==(a=s.handleBounds)?void 0:a[t]:[...(null==(l=s.handleBounds)?void 0:l.source)??[],...(null==(u=s.handleBounds)?void 0:u.target)??[]],d=(n?null==c?void 0:c.find((e=>e.id===n)):null==c?void 0:c[0])??null;return d&&r?{...d,...ei(s,d,d.position,!0)}:d}((0,r.toValue)(t),L,(0,r.toValue)(e),C.value,c.value);if(!Y)return;let G,F=si(f,H),X=!1;const U=()=>{if(!v.value)return;const[e,t]=Ho(F,H,g.value);y({x:e,y:t}),O=requestAnimationFrame(U)},j={...Y,nodeId:(0,r.toValue)(t),type:L,position:Y.position},W=C.value.get((0,r.toValue)(t)),Z={inProgress:!0,isValid:null,from:ei(W,j,oo.Left,!0),fromHandle:j,fromPosition:j.position,fromNode:W,to:F,toHandle:null,toPosition:gi[j.position],toNode:null};w({nodeId:(0,r.toValue)(t),id:(0,r.toValue)(e),type:L,position:(null==R?void 0:R.getAttribute("data-handlepos"))||oo.Top},{x:$-H.left,y:V-H.top}),b.connectStart({event:f,nodeId:(0,r.toValue)(t),handleId:(0,r.toValue)(e),handleType:L});let q=Z;B.addEventListener("mousemove",n),B.addEventListener("mouseup",A),B.addEventListener("touchmove",n),B.addEventListener("touchend",A)}},handleClick:function(i){var a,l;if(!f.value)return;const s="target"===(0,r.toValue)(n);if(!h.value)return b.clickConnectStart({event:i,nodeId:(0,r.toValue)(t),handleId:(0,r.toValue)(e)}),void w({nodeId:(0,r.toValue)(t),type:(0,r.toValue)(n),id:(0,r.toValue)(e),position:oo.Top},void 0,!0);let d=(0,r.toValue)(o)||k.value||$i;const v=m((0,r.toValue)(t));if(!d&&v&&(d=(s?v.isValidSourcePos:v.isValidTargetPos)||$i),v&&!1===(void 0===v.connectable?p.value:v.connectable))return;const g=bo(i.target),y=pi(i,{handle:{nodeId:(0,r.toValue)(t),id:(0,r.toValue)(e),type:(0,r.toValue)(n),position:oo.Top},connectionMode:c.value,fromNodeId:h.value.nodeId,fromHandleId:h.value.id||null,fromType:h.value.type,isValidConnection:d,doc:g,lib:"vue",flowId:u,nodeLookup:C.value},S.value,N.value,m),x=(null==(a=y.connection)?void 0:a.source)===(null==(l=y.connection)?void 0:l.target);y.isValid&&y.connection&&!x&&b.connect(y.connection),b.clickConnectEnd(i),_(i,!0)}}}function Ri(e){const t=e??(0,r.inject)(Pi,"")??"",n=(0,r.inject)(Ai,(0,r.ref)(null)),{findNode:o,edges:i,emits:a}=kr(),l=o(t);return l||a.error(new ai(ii.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:l,parentNode:(0,r.computed)((()=>o(l.parentNode))),connectedEdges:(0,r.computed)((()=>Oo([l],i.value)))}}function Li(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:a,emits:l}=kr();return(u,s=!1)=>{const c=r.value?i.value[0]:5,d=r.value?i.value[1]:5,f=s?4:1,h=u.x*c*f,p=u.y*d*f,v=[];for(const n of e.value)if(n.draggable||a&&void 0===n.draggable){const e={x:n.computedPosition.x+h,y:n.computedPosition.y+p},{computedPosition:i}=Qo(n,e,l.error,t.value,n.parentNode?o(n.parentNode):void 0);v.push({id:n.id,position:i,from:n.position,distance:{x:u.x,y:u.y},dimensions:n.dimensions})}n(v,!0,!1)}}function Hi(){return yi("Viewport not initialized yet."),Promise.resolve(!1)}const Yi={zoomIn:Hi,zoomOut:Hi,zoomTo:Hi,fitView:Hi,setCenter:Hi,fitBounds:Hi,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:Hi,setTransform:Hi,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Gi(e,t=0,n){return e.transition().duration(t).on("end",n)}function Fi(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:io.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:uo.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:ro.Bezier,style:{}},connectionMode:ao.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:ci()?"Meta":"Control",zoomActivationKeyCode:ci()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:{edgesChange:Zo(),nodesChange:Zo(),nodeDoubleClick:Zo(),nodeClick:Zo(),nodeMouseEnter:Zo(),nodeMouseMove:Zo(),nodeMouseLeave:Zo(),nodeContextMenu:Zo(),nodeDragStart:Zo(),nodeDrag:Zo(),nodeDragStop:Zo(),nodesInitialized:Zo(),miniMapNodeClick:Zo(),miniMapNodeDoubleClick:Zo(),miniMapNodeMouseEnter:Zo(),miniMapNodeMouseMove:Zo(),miniMapNodeMouseLeave:Zo(),connect:Zo(),connectStart:Zo(),connectEnd:Zo(),clickConnectStart:Zo(),clickConnectEnd:Zo(),paneReady:Zo(),init:Zo(),move:Zo(),moveStart:Zo(),moveEnd:Zo(),selectionDragStart:Zo(),selectionDrag:Zo(),selectionDragStop:Zo(),selectionContextMenu:Zo(),selectionStart:Zo(),selectionEnd:Zo(),viewportChangeStart:Zo(),viewportChange:Zo(),viewportChangeEnd:Zo(),paneScroll:Zo(),paneClick:Zo(),paneContextMenu:Zo(),paneMouseEnter:Zo(),paneMouseMove:Zo(),paneMouseLeave:Zo(),edgeContextMenu:Zo(),edgeMouseEnter:Zo(),edgeMouseMove:Zo(),edgeMouseLeave:Zo(),edgeDoubleClick:Zo(),edgeClick:Zo(),edgeUpdateStart:Zo(),edgeUpdate:Zo(),edgeUpdateEnd:Zo(),updateNodeInternals:Zo(),error:Zo((e=>yi(e.message)))},applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Xi=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Ui(e,t,n){const o=function(e){function t(t,n){return new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Gi(e.d3Selection,n,(()=>{o(!0)})),t):o(!1)}))}function n(t,n,o,i){return new Promise((r=>{const{x:a,y:l}=_o({x:-t,y:-n},e.translateExtent),u=Wn.translate(-a,-l).scale(o);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Gi(e.d3Selection,i,(()=>{r(!0)})),u):r(!1)}))}return(0,r.computed)((()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:e=>t(1.2,null==e?void 0:e.duration),zoomOut:e=>t(1/1.2,null==e?void 0:e.duration),zoomTo:(t,n)=>new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Gi(e.d3Selection,null==n?void 0:n.duration,(()=>{o(!0)})),t):o(!1)})),setViewport:(e,t)=>n(e.x,e.y,e.zoom,null==t?void 0:t.duration),setTransform:(e,t)=>n(e.x,e.y,e.zoom,null==t?void 0:t.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(t={padding:.1,includeHiddenNodes:!1,duration:0})=>{var o,i;const r=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&((null==t?void 0:t.includeHiddenNodes)||!n.hidden)&&(!(null==(o=t.nodes)?void 0:o.length)||(null==(i=t.nodes)?void 0:i.length)&&t.nodes.includes(n.id))&&r.push(n);if(!r.length)return Promise.resolve(!1);const a=zo(r),{x:l,y:u,zoom:s}=$o(a,e.dimensions.width,e.dimensions.height,t.minZoom??e.minZoom,t.maxZoom??e.maxZoom,t.padding??.1,t.offset);return n(l,u,s,null==t?void 0:t.duration)},setCenter:(t,o,i)=>{const r=void 0!==(null==i?void 0:i.zoom)?i.zoom:e.maxZoom;return n(e.dimensions.width/2-t*r,e.dimensions.height/2-o*r,r,null==i?void 0:i.duration)},fitBounds:(t,o={padding:.1})=>{const{x:i,y:r,zoom:a}=$o(t,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,o.padding);return n(i,r,a,null==o?void 0:o.duration)},project:t=>Bo(t,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect();return Bo({x:t.x-n,y:t.y-o},e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect();return Ao({x:t.x+n,y:t.y+o},e.viewport)}return{x:0,y:0}}}:Yi))}(e),i=t=>{const n=t??[];e.hooks.updateNodeInternals.trigger(n)},a=t=>Oo(t,e.edges),l=e=>{if(e)return t.value.get(e)},u=e=>{if(e)return n.value.get(e)},s=(o,i)=>{const r=new Set,a=new Set;for(const e of o)So(e)?r.add(e.id):Eo(e)&&a.add(e.id);const l=Wo(t.value,r,!0),u=Wo(n.value,a);if(e.multiSelectionActive){for(const e of r)l.push(Fo(e,i));for(const e of a)u.push(Fo(e,i))}l.length&&e.hooks.nodesChange.trigger(l),u.length&&e.hooks.edgesChange.trigger(u)},c=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([t,e.maxZoom]),e.minZoom=t},d=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([e.minZoom,t]),e.maxZoom=t},f=t=>{var n;null==(n=e.d3Zoom)||n.translateExtent(t),e.translateExtent=t},h=t=>{const n=t instanceof Function?t(e.nodes):t;(e.initialized||n.length)&&(e.nodes=Si(n,l,e.hooks.error.trigger))},p=t=>{const o=t instanceof Function?t(e.edges):t;if(!e.initialized&&!o.length)return;const i=Mi(o,e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);ki(e.connectionLookup,n.value,i),e.edges=i},v=t=>{const n=t instanceof Function?t([...e.nodes,...e.edges]):t;(e.initialized||n.length)&&(h(n.filter(So)),p(n.filter(Eo)))},g=e=>{const t=ko((n=e).width)&&ko(n.height)&&ko(n.x)&&ko(n.y);var n;const o=t?null:No(e)?e:l(e.id);return t||o?[t?e:mo(o),o,t]:[null,null,t]},y=t=>{const n=t instanceof Function?t(e):t,o=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];bi(n.defaultEdgeOptions)&&(e.defaultEdgeOptions=n.defaultEdgeOptions);const i=n.modelValue||n.nodes||n.edges?[]:void 0;i&&(n.modelValue&&i.push(...n.modelValue),n.nodes&&i.push(...n.nodes),n.edges&&i.push(...n.edges),v(i));for(const t of Object.keys(n)){const i=t,r=n[i];![...Xi,...o].includes(i)&&bi(r)&&(e[i]=r)}m((()=>e.d3Zoom)).not.toBeNull().then((()=>{bi(n.maxZoom)&&d(n.maxZoom),bi(n.minZoom)&&c(n.minZoom),bi(n.translateExtent)&&f(n.translateExtent)})),e.initialized||(e.initialized=!0)};return{updateNodePositions:(t,n,o)=>{var i,r;const a=[];for(const e of t){const t={id:e.id,type:"position",dragging:o,from:e.from};if(n&&(t.position=e.position,e.parentNode)){const n=l(e.parentNode);t.position={x:t.position.x-((null==(i=null==n?void 0:n.computedPosition)?void 0:i.x)??0),y:t.position.y-((null==(r=null==n?void 0:n.computedPosition)?void 0:r.y)??0)}}a.push(t)}(null==a?void 0:a.length)&&e.hooks.nodesChange.trigger(a)},updateNodeDimensions:t=>{if(!e.vueFlowRef)return;const n=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!n)return;const i=window.getComputedStyle(n),{m22:r}=new window.DOMMatrixReadOnly(i.transform),a=[];for(let e=0;e<t.length;++e){const n=t[e],o=l(n.id);if(o){const e=wo(n.nodeElement);if(e.width&&e.height&&(o.dimensions.width!==e.width||o.dimensions.height!==e.height||n.forceUpdate)){const t=n.nodeElement.getBoundingClientRect();o.dimensions=e,o.handleBounds.source=xi("source",n.nodeElement,t,r),o.handleBounds.target=xi("target",n.nodeElement,t,r),a.push({id:o.id,type:"dimensions",dimensions:e})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then((()=>{e.fitViewOnInitDone=!0})),a.length&&e.hooks.nodesChange.trigger(a)},setElements:v,setNodes:h,setEdges:p,addNodes:t=>{let n=t instanceof Function?t(e.nodes):t;n=Array.isArray(n)?n:[n];const o=Si(n,l,e.hooks.error.trigger),i=[];for(const e of o)i.push(Xo(e));i.length&&e.hooks.nodesChange.trigger(i)},addEdges:t=>{let n=t instanceof Function?t(e.edges):t;n=Array.isArray(n)?n:[n];const o=Mi(n,e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),i=[];for(const e of o)i.push(Xo(e));i.length&&e.hooks.edgesChange.trigger(i)},removeNodes:(t,n=!0,o=!1)=>{const i=t instanceof Function?t(e.nodes):t,r=Array.isArray(i)?i:[i],u=[],s=[];function c(e){const t=a(e);for(const e of t)bi(e.deletable)&&!e.deletable||s.push(jo(e.id,e.source,e.target,e.sourceHandle,e.targetHandle))}function d(t){const o=[];for(const n of e.nodes)n.parentNode===t&&o.push(n);if(o.length){for(const e of o)u.push(Uo(e.id));n&&c(o);for(const e of o)d(e.id)}}for(const e of r){const t="string"==typeof e?l(e):e;t&&(bi(t.deletable)&&!t.deletable||(u.push(Uo(t.id)),n&&c([t]),o&&d(t.id)))}s.length&&e.hooks.edgesChange.trigger(s),u.length&&e.hooks.nodesChange.trigger(u)},removeEdges:t=>{const n=t instanceof Function?t(e.edges):t,o=Array.isArray(n)?n:[n],i=[];for(const e of o){const t="string"==typeof e?u(e):e;t&&(bi(t.deletable)&&!t.deletable||i.push(jo("string"==typeof e?e:e.id,t.source,t.target,t.sourceHandle,t.targetHandle)))}e.hooks.edgesChange.trigger(i)},findNode:l,findEdge:u,updateEdge:(t,o,i=!0)=>{const r=u(t.id),a=function(e,t,n,o,i){if(!t.source||!t.target)return i(new ai(ii.EDGE_INVALID,e.id)),!1;if(!n)return i(new ai(ii.EDGE_NOT_FOUND,e.id)),!1;const{id:r,...a}=e;return{...a,id:o?Po(t):r,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}(t,o,r,i,e.hooks.error.trigger);if(a){const[t]=Mi([a],e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges.splice(e.edges.indexOf(r),1,t),ki(e.connectionLookup,n.value,[t]),t}return!1},updateEdgeData:(e,t,n={replace:!1})=>{const o=u(e);if(!o)return;const i="function"==typeof t?t(o):t;o.data=n.replace?i:{...o.data,...i}},updateNode:(t,n,o={replace:!1})=>{const i=l(t);if(!i)return;const r="function"==typeof n?n(i):n;o.replace?e.nodes.splice(e.nodes.indexOf(i),1,r):Object.assign(i,r)},updateNodeData:(e,t,n={replace:!1})=>{const o=l(e);if(!o)return;const i="function"==typeof t?t(o):t;o.data=n.replace?i:{...o.data,...i}},applyEdgeChanges:t=>{const o=Go(t,e.edges);return ki(e.connectionLookup,n.value,o),o},applyNodeChanges:t=>Go(t,e.nodes),addSelectedElements:e=>{s(e,!0)},addSelectedNodes:o=>{if(e.multiSelectionActive){const t=o.map((e=>Fo(e.id,!0)));e.hooks.nodesChange.trigger(t)}else e.hooks.nodesChange.trigger(Wo(t.value,new Set(o.map((e=>e.id))),!0)),e.hooks.edgesChange.trigger(Wo(n.value))},addSelectedEdges:o=>{if(e.multiSelectionActive){const t=o.map((e=>Fo(e.id,!0)));e.hooks.edgesChange.trigger(t)}else e.hooks.edgesChange.trigger(Wo(n.value,new Set(o.map((e=>e.id))))),e.hooks.nodesChange.trigger(Wo(t.value,new Set,!0))},setMinZoom:c,setMaxZoom:d,setTranslateExtent:f,setNodeExtent:t=>{e.nodeExtent=t,i()},setPaneClickDistance:t=>{var n;null==(n=e.d3Zoom)||n.clickDistance(t)},removeSelectedElements:t=>{if(!t||!t.length)return s([],!1);const n=t.reduce(((e,t)=>{const n=Fo(t.id,!1);return So(t)?e.nodes.push(n):e.edges.push(n),e}),{nodes:[],edges:[]});n.nodes.length&&e.hooks.nodesChange.trigger(n.nodes),n.edges.length&&e.hooks.edgesChange.trigger(n.edges)},removeSelectedNodes:t=>{const n=(t||e.nodes).map((e=>(e.selected=!1,Fo(e.id,!1))));e.hooks.nodesChange.trigger(n)},removeSelectedEdges:t=>{const n=(t||e.edges).map((e=>(e.selected=!1,Fo(e.id,!1))));e.hooks.edgesChange.trigger(n)},startConnection:(t,n,o=!1)=>{o?e.connectionClickStartHandle=t:e.connectionStartHandle=t,e.connectionEndHandle=null,e.connectionStatus=null,n&&(e.connectionPosition=n)},updateConnection:(t,n=null,o=null)=>{e.connectionStartHandle&&(e.connectionPosition=t,e.connectionEndHandle=n,e.connectionStatus=o)},endConnection:(t,n)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,n?e.connectionClickStartHandle=null:e.connectionStartHandle=null},setInteractive:t=>{e.nodesDraggable=t,e.nodesConnectable=t,e.elementsSelectable=t},setState:y,getIntersectingNodes:(t,n=!0,o=e.nodes)=>{const[i,r,a]=g(t);if(!i)return[];const l=[];for(const t of o||e.nodes){if(!(a||t.id!==r.id&&t.computedPosition))continue;const e=yo(mo(t),i);(n&&e>0||e>=Number(i.width)*Number(i.height))&&l.push(t)}return l},getIncomers:t=>function(...e){if(3===e.length){const[t,n,o]=e;return Io(t,n,o,"source")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter((e=>Eo(e)&&e.target===o)).map((e=>n.find((t=>So(t)&&t.id===e.source))))}(t,e.nodes,e.edges),getOutgoers:t=>function(...e){if(3===e.length){const[t,n,o]=e;return Io(t,n,o,"target")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter((e=>Eo(e)&&e.source===o)).map((e=>n.find((t=>So(t)&&t.id===e.target))))}(t,e.nodes,e.edges),getConnectedEdges:a,getHandleConnections:({id:t,type:n,nodeId:o})=>{var i;return Array.from((null==(i=e.connectionLookup.get(`${o}-${n}-${t??null}`))?void 0:i.values())??[])},isNodeIntersecting:(e,t,n=!0)=>{const[o]=g(e);if(!o)return!1;const i=yo(o,t);return n&&i>0||i>=Number(o.width)*Number(o.height)},panBy:t=>{const{viewport:n,dimensions:o,d3Zoom:i,d3Selection:r,translateExtent:a}=e;if(!i||!r||!t.x&&!t.y)return!1;const l=Wn.translate(n.x+t.x,n.y+t.y).scale(n.zoom),u=[[0,0],[o.width,o.height]],s=i.constrain()(l,u,a),c=e.viewport.x!==s.x||e.viewport.y!==s.y||e.viewport.zoom!==s.k;return i.transform(r,s),c},fitView:e=>o.value.fitView(e),zoomIn:e=>o.value.zoomIn(e),zoomOut:e=>o.value.zoomOut(e),zoomTo:(e,t)=>o.value.zoomTo(e,t),setViewport:(e,t)=>o.value.setViewport(e,t),setTransform:(e,t)=>o.value.setTransform(e,t),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(e,t,n)=>o.value.setCenter(e,t,n),fitBounds:(e,t)=>o.value.fitBounds(e,t),project:e=>o.value.project(e),screenToFlowCoordinate:e=>o.value.screenToFlowCoordinate(e),flowToScreenCoordinate:e=>o.value.flowToScreenCoordinate(e),toObject:()=>{const t=[],n=[];for(const n of e.nodes){const{computedPosition:e,handleBounds:o,selected:i,dimensions:r,isParent:a,resizing:l,dragging:u,events:s,...c}=n;t.push(c)}for(const t of e.edges){const{selected:e,sourceNode:o,targetNode:i,events:r,...a}=t;n.push(a)}return JSON.parse(JSON.stringify({nodes:t,edges:n,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:t=>new Promise((n=>{const{nodes:i,edges:r,position:a,zoom:l,viewport:u}=t;if(i&&h(i),r&&p(r),(null==u?void 0:u.x)&&(null==u?void 0:u.y)||a){const t=(null==u?void 0:u.x)||a[0],i=(null==u?void 0:u.y)||a[1],r=(null==u?void 0:u.zoom)||l||e.viewport.zoom;return m((()=>o.value.viewportInitialized)).toBe(!0).then((()=>{o.value.setViewport({x:t,y:i,zoom:r}).then((()=>{n(!0)}))}))}n(!0)})),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const t=Fi();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const n=Wn.translate(t.defaultViewport.x??0,t.defaultViewport.y??0).scale(xo(t.defaultViewport.zoom??1,t.minZoom,t.maxZoom)),o=e.viewportRef.getBoundingClientRect(),i=[[0,0],[o.width,o.height]],r=e.d3Zoom.constrain()(n,i,t.translateExtent);e.d3Zoom.transform(e.d3Selection,r)}y(t)},$destroy:()=>{}}}const ji=["data-id","data-handleid","data-nodeid","data-handlepos"],Wi=(0,r.defineComponent)({name:"Handle",compatConfig:{MODE:3},props:{id:{default:null},type:{},position:{default:()=>oo.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=(0,r.createPropsRestProxy)(e,["position","connectable","connectableStart","connectableEnd","id"]),o=(0,r.toRef)((()=>n.type??"source")),i=(0,r.toRef)((()=>n.isValidConnection??null)),{id:a,connectionStartHandle:l,connectionClickStartHandle:u,connectionEndHandle:s,vueFlowRef:c,nodesConnectable:d,noDragClassName:f,noPanClassName:h}=kr(),{id:p,node:v,nodeEl:g,connectedEdges:m}=Ri(),y=(0,r.ref)(),w=(0,r.toRef)((()=>void 0===e.connectableStart||e.connectableStart)),x=(0,r.toRef)((()=>void 0===e.connectableEnd||e.connectableEnd)),_=(0,r.toRef)((()=>{var t,n,i,r,a,u;return(null==(t=l.value)?void 0:t.nodeId)===p&&(null==(n=l.value)?void 0:n.id)===e.id&&(null==(i=l.value)?void 0:i.type)===o.value||(null==(r=s.value)?void 0:r.nodeId)===p&&(null==(a=s.value)?void 0:a.id)===e.id&&(null==(u=s.value)?void 0:u.type)===o.value})),b=(0,r.toRef)((()=>{var t,n,i;return(null==(t=u.value)?void 0:t.nodeId)===p&&(null==(n=u.value)?void 0:n.id)===e.id&&(null==(i=u.value)?void 0:i.type)===o.value})),{handlePointerDown:E,handleClick:S}=Vi({nodeId:p,handleId:e.id,isValidConnection:i,type:o}),N=(0,r.computed)((()=>"string"==typeof e.connectable&&"single"===e.connectable?!m.value.some((t=>{const n=t[`${o.value}Handle`];return t[o.value]===p&&(!n||n===e.id)})):"number"==typeof e.connectable?m.value.filter((t=>{const n=t[`${o.value}Handle`];return t[o.value]===p&&(!n||n===e.id)})).length<e.connectable:"function"==typeof e.connectable?e.connectable(v,m.value):bi(e.connectable)?e.connectable:d.value));function k(e){const t=li(e);N.value&&w.value&&(t&&0===e.button||!t)&&E(e)}function C(e){p&&(u.value||w.value)&&N.value&&S(e)}return(0,r.onMounted)((()=>{var t;if(!v.dimensions.width||!v.dimensions.height)return;const n=null==(t=v.handleBounds[o.value])?void 0:t.find((t=>t.id===e.id));if(!c.value||n)return;const i=c.value.querySelector(".vue-flow__transformationpane");if(!(g.value&&y.value&&i&&e.id))return;const r=g.value.getBoundingClientRect(),a=y.value.getBoundingClientRect(),l=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(l.transform),s={id:e.id,position:e.position,x:(a.left-r.left)/u,y:(a.top-r.top)/u,type:o.value,nodeId:p,...wo(y.value)};v.handleBounds[o.value]=[...v.handleBounds[o.value]??[],s]})),(0,r.onUnmounted)((()=>{const t=v.handleBounds[o.value];t&&(v.handleBounds[o.value]=t.filter((t=>t.id!==e.id)))})),t({handleClick:S,handlePointerDown:E,onClick:C,onPointerDown:k}),(t,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{ref_key:"handle",ref:y,"data-id":`${(0,r.unref)(a)}-${(0,r.unref)(p)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":(0,r.unref)(p),"data-handlepos":t.position,class:(0,r.normalizeClass)(["vue-flow__handle",[`vue-flow__handle-${t.position}`,`vue-flow__handle-${e.id}`,(0,r.unref)(f),(0,r.unref)(h),o.value,{connectable:N.value,connecting:b.value,connectablestart:w.value,connectableend:x.value,connectionindicator:N.value&&(w.value&&!_.value||x.value&&_.value)}]]),onMousedown:k,onTouchstartPassive:k,onClick:C},[(0,r.renderSlot)(t.$slots,"default",{id:t.id})],42,ji))}}),Zi=function({sourcePosition:e=oo.Bottom,targetPosition:t=oo.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a,data:l}){const u=l.label||n;return[(0,r.h)(Wi,{type:"target",position:t,connectable:o,isValidConnection:i}),"string"!=typeof u&&u?(0,r.h)(u):(0,r.h)(r.Fragment,[u]),(0,r.h)(Wi,{type:"source",position:e,connectable:o,isValidConnection:a})]};Zi.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"],Zi.inheritAttrs=!1,Zi.compatConfig={MODE:3};const qi=Zi,Ki=function({targetPosition:e=oo.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const a=i.label||t;return[(0,r.h)(Wi,{type:"target",position:e,connectable:n,isValidConnection:o}),"string"!=typeof a&&a?(0,r.h)(a):(0,r.h)(r.Fragment,[a])]};Ki.props=["targetPosition","label","isValidTargetPos","connectable","data"],Ki.inheritAttrs=!1,Ki.compatConfig={MODE:3};const Ji=Ki,Qi=function({sourcePosition:e=oo.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const a=i.label||t;return["string"!=typeof a&&a?(0,r.h)(a):(0,r.h)(r.Fragment,[a]),(0,r.h)(Wi,{type:"source",position:e,connectable:n,isValidConnection:o})]};Qi.props=["sourcePosition","label","isValidSourcePos","connectable","data"],Qi.inheritAttrs=!1,Qi.compatConfig={MODE:3};const er=Qi,tr=["transform"],nr=["width","height","x","y","rx","ry"],or=["y"],ir=(0,r.defineComponent)({name:"EdgeText",compatConfig:{MODE:3},props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=(0,r.ref)({x:0,y:0,width:0,height:0}),n=(0,r.ref)(null),o=(0,r.computed)((()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`));function i(){if(!n.value)return;const e=n.value.getBBox();e.width===t.value.width&&e.height===t.value.height||(t.value=e)}return(0,r.onMounted)(i),(0,r.watch)([()=>e.x,()=>e.y,n,()=>e.label],i),(e,i)=>((0,r.openBlock)(),(0,r.createElementBlock)("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[e.labelShowBg?((0,r.openBlock)(),(0,r.createElementBlock)("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:(0,r.normalizeStyle)(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,nr)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("text",(0,r.mergeProps)(e.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:e.labelStyle}),[(0,r.renderSlot)(e.$slots,"default",{},(()=>["string"!=typeof e.label?((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.label),{key:0})):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createTextVNode)((0,r.toDisplayString)(e.label),1)],64))]))],16,or)],8,tr))}}),rr=["id","d","marker-end","marker-start"],ar=["d","stroke-width"],lr=(0,r.defineComponent)({name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3},props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=(0,r.ref)(null),o=(0,r.ref)(null),i=(0,r.ref)(null),a=(0,r.useAttrs)();return t({pathEl:n,interactionEl:o,labelEl:i}),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createElementVNode)("path",(0,r.mergeProps)((0,r.unref)(a),{id:e.id,ref_key:"pathEl",ref:n,d:e.path,class:"vue-flow__edge-path","marker-end":e.markerEnd,"marker-start":e.markerStart}),null,16,rr),e.interactionWidth?((0,r.openBlock)(),(0,r.createElementBlock)("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:e.path,"stroke-width":e.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,ar)):(0,r.createCommentVNode)("",!0),e.label&&e.labelX&&e.labelY?((0,r.openBlock)(),(0,r.createBlock)(ir,{key:1,ref_key:"labelEl",ref:i,x:e.labelX,y:e.labelY,label:e.label,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"label-style":e.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):(0,r.createCommentVNode)("",!0)],64))}});function ur({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,a=Math.abs(o-t)/2;return[r,o<t?o+a:o-a,i,a]}function sr({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:a,targetControlY:l}){const u=.125*e+.375*i+.375*a+.125*n,s=.125*t+.375*r+.375*l+.125*o;return[u,s,Math.abs(u-e),Math.abs(s-t)]}function cr(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function dr({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let a,l;switch(e){case oo.Left:a=t-cr(t-o,r),l=n;break;case oo.Right:a=t+cr(o-t,r),l=n;break;case oo.Top:a=t,l=n-cr(n-i,r);break;case oo.Bottom:a=t,l=n+cr(i-n,r)}return[a,l]}function fr(e){const{sourceX:t,sourceY:n,sourcePosition:o=oo.Bottom,targetX:i,targetY:r,targetPosition:a=oo.Top,curvature:l=.25}=e,[u,s]=dr({pos:o,x1:t,y1:n,x2:i,y2:r,c:l}),[c,d]=dr({pos:a,x1:i,y1:r,x2:t,y2:n,c:l}),[f,h,p,v]=sr({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:u,sourceControlY:s,targetControlX:c,targetControlY:d});return[`M${t},${n} C${u},${s} ${c},${d} ${i},${r}`,f,h,p,v]}function hr({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,a;switch(e){case oo.Left:case oo.Right:r=.5*(t+o),a=n;break;case oo.Top:case oo.Bottom:r=t,a=.5*(n+i)}return[r,a]}function pr(e){const{sourceX:t,sourceY:n,sourcePosition:o=oo.Bottom,targetX:i,targetY:r,targetPosition:a=oo.Top}=e,[l,u]=hr({pos:o,x1:t,y1:n,x2:i,y2:r}),[s,c]=hr({pos:a,x1:i,y1:r,x2:t,y2:n}),[d,f,h,p]=sr({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${t},${n} C${l},${u} ${s},${c} ${i},${r}`,d,f,h,p]}const vr={[oo.Left]:{x:-1,y:0},[oo.Right]:{x:1,y:0},[oo.Top]:{x:0,y:-1},[oo.Bottom]:{x:0,y:1}};function gr(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function mr(e){const{sourceX:t,sourceY:n,sourcePosition:o=oo.Bottom,targetX:i,targetY:r,targetPosition:a=oo.Top,borderRadius:l=5,centerX:u,centerY:s,offset:c=20}=e,[d,f,h,p,v]=function({source:e,sourcePosition:t=oo.Bottom,target:n,targetPosition:o=oo.Top,center:i,offset:r}){const a=vr[t],l=vr[o],u={x:e.x+a.x*r,y:e.y+a.y*r},s={x:n.x+l.x*r,y:n.y+l.y*r},c=function({source:e,sourcePosition:t=oo.Bottom,target:n}){return t===oo.Left||t===oo.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}({source:u,sourcePosition:t,target:s}),d=0!==c.x?"x":"y",f=c[d];let h,p,v;const g={x:0,y:0},m={x:0,y:0},[y,w,x,_]=ur({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]==-1){p=i.x??y,v=i.y??w;const e=[{x:p,y:u.y},{x:p,y:s.y}],t=[{x:u.x,y:v},{x:s.x,y:v}];h=a[d]===f?"x"===d?e:t:"x"===d?t:e}else{const i=[{x:u.x,y:s.y}],c=[{x:s.x,y:u.y}];if(h="x"===d?a.x===f?c:i:a.y===f?i:c,t===o){const t=Math.abs(e[d]-n[d]);if(t<=r){const o=Math.min(r-1,r-t);a[d]===f?g[d]=(u[d]>e[d]?-1:1)*o:m[d]=(s[d]>n[d]?-1:1)*o}}if(t!==o){const e="x"===d?"y":"x",t=a[d]===l[e],n=u[e]>s[e],o=u[e]<s[e];(1===a[d]&&(!t&&n||t&&o)||1!==a[d]&&(!t&&o||t&&n))&&(h="x"===d?i:c)}const y={x:u.x+g.x,y:u.y+g.y},w={x:s.x+m.x,y:s.y+m.y};Math.max(Math.abs(y.x-h[0].x),Math.abs(w.x-h[0].x))>=Math.max(Math.abs(y.y-h[0].y),Math.abs(w.y-h[0].y))?(p=(y.x+w.x)/2,v=h[0].y):(p=h[0].x,v=(y.y+w.y)/2)}return[[e,{x:u.x+g.x,y:u.y+g.y},...h,{x:s.x+m.x,y:s.y+m.y},n],p,v,x,_]}({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:r},targetPosition:a,center:{x:u,y:s},offset:c});return[d.reduce(((e,t,n)=>{let o;return o=n>0&&n<d.length-1?function(e,t,n,o){const i=Math.min(gr(e,t)/2,gr(t,n)/2,o),{x:r,y:a}=t;if(e.x===r&&r===n.x||e.y===a&&a===n.y)return`L${r} ${a}`;if(e.y===a)return`L ${r+i*(e.x<n.x?-1:1)},${a}Q ${r},${a} ${r},${a+i*(e.y<n.y?1:-1)}`;const l=e.x<n.x?1:-1;return`L ${r},${a+i*(e.y<n.y?-1:1)}Q ${r},${a} ${r+i*l},${a}`}(d[n-1],t,d[n+1],l):`${0===n?"M":"L"}${t.x} ${t.y}`,e+o}),""),f,h,p,v]}const yr=(0,r.defineComponent)({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,i]=function(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[r,a,l,u]=ur({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,r,a,l,u]}(e);return(0,r.h)(lr,{path:n,labelX:o,labelY:i,...t,...e})}}),wr=(0,r.defineComponent)({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,i]=mr({...e,sourcePosition:e.sourcePosition??oo.Bottom,targetPosition:e.targetPosition??oo.Top});return(0,r.h)(lr,{path:n,labelX:o,labelY:i,...t,...e})}}),xr=(0,r.defineComponent)({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup:(e,{attrs:t})=>()=>(0,r.h)(wr,{...e,...t,borderRadius:0})}),_r=(0,r.defineComponent)({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,i]=fr({...e,sourcePosition:e.sourcePosition??oo.Bottom,targetPosition:e.targetPosition??oo.Top});return(0,r.h)(lr,{path:n,labelX:o,labelY:i,...t,...e})}}),br=(0,r.defineComponent)({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,i]=pr({...e,sourcePosition:e.sourcePosition??oo.Bottom,targetPosition:e.targetPosition??oo.Top});return(0,r.h)(lr,{path:n,labelX:o,labelY:i,...t,...e})}}),Er={input:er,default:qi,output:Ji},Sr={default:_r,straight:yr,step:xr,smoothstep:wr,simplebezier:br};class Nr{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var e;const t=null==(e=(0,r.getCurrentInstance)())?void 0:e.appContext.app,n=(null==t?void 0:t.config.globalProperties.$vueFlowStorage)??Nr.instance;return Nr.instance=n??new Nr,t&&(t.config.globalProperties.$vueFlowStorage=Nr.instance),Nr.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,t){const n=Fi(),o=(0,r.reactive)(n),i={};for(const[e,t]of Object.entries(o.hooks))i[`on${e.charAt(0).toUpperCase()+e.slice(1)}`]=t.on;const a={};for(const[e,t]of Object.entries(o.hooks))a[e]=t.trigger;const l=(0,r.computed)((()=>{const e=new Map;for(const t of o.nodes)e.set(t.id,t);return e})),u=(0,r.computed)((()=>{const e=new Map;for(const t of o.edges)e.set(t.id,t);return e})),s=function(e,t,n){const o=(0,r.computed)((()=>e=>t.value.get(e))),i=(0,r.computed)((()=>e=>n.value.get(e))),a=(0,r.computed)((()=>{const t={...Sr,...e.edgeTypes},n=Object.keys(t);for(const o of e.edges)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),l=(0,r.computed)((()=>{const t={...Er,...e.nodeTypes},n=Object.keys(t);for(const o of e.nodes)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),u=(0,r.computed)((()=>e.onlyRenderVisibleElements?Do(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes)),s=(0,r.computed)((()=>{if(e.onlyRenderVisibleElements){const n=[];for(const o of e.edges){const i=t.value.get(o.source),r=t.value.get(o.target);ni({sourcePos:i.computedPosition||{x:0,y:0},targetPos:r.computedPosition||{x:0,y:0},sourceWidth:i.dimensions.width,sourceHeight:i.dimensions.height,targetWidth:r.dimensions.width,targetHeight:r.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&n.push(o)}return n}return e.edges})),c=(0,r.computed)((()=>[...u.value,...s.value])),d=(0,r.computed)((()=>{const t=[];for(const n of e.nodes)n.selected&&t.push(n);return t})),f=(0,r.computed)((()=>{const t=[];for(const n of e.edges)n.selected&&t.push(n);return t})),h=(0,r.computed)((()=>[...d.value,...f.value])),p=(0,r.computed)((()=>{const t=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&void 0!==n.handleBounds&&t.push(n);return t})),v=(0,r.computed)((()=>u.value.length>0&&p.value.length===u.value.length));return{getNode:o,getEdge:i,getElements:c,getEdgeTypes:a,getNodeTypes:l,getEdges:s,getNodes:u,getSelectedElements:h,getSelectedNodes:d,getSelectedEdges:f,getNodesInitialized:p,areNodesInitialized:v}}(o,l,u),c=Ui(o,l,u);c.setState({...o,...t});const d={...i,...s,...c,...v(o),nodeLookup:l,edgeLookup:u,emits:a,id:e,vueFlowVersion:"1.42.1",$destroy:()=>{this.remove(e)}};return this.set(e,d),d}getId(){return"vue-flow-"+this.currentId++}}function kr(e){const t=Nr.getInstance(),n=(0,r.getCurrentScope)(),o="object"==typeof e,i=o?e:{id:e},l=i.id,u=l??(null==n?void 0:n.vueFlowId);let s;if(n){const e=(0,r.inject)(Ii,null);null==e||u&&e.id!==u||(s=e)}if(s||u&&(s=t.get(u)),!s||u&&s.id!==u){const e=l??t.getId(),o=t.create(e,i);s=o,(n??(0,r.effectScope)(!0)).run((()=>{(0,r.watch)(o.applyDefault,((e,t,n)=>{const i=e=>{o.applyNodeChanges(e)},r=e=>{o.applyEdgeChanges(e)};e?(o.onNodesChange(i),o.onEdgesChange(r)):(o.hooks.value.nodesChange.off(i),o.hooks.value.edgesChange.off(r)),n((()=>{o.hooks.value.nodesChange.off(i),o.hooks.value.edgesChange.off(r)}))}),{immediate:!0}),a((()=>{if(s){const e=t.get(s.id);e?e.$destroy():yi(`No store instance found for id ${s.id} in storage.`)}}))}))}else o&&s.setState(i);if(n&&((0,r.provide)(Ii,s),n.vueFlowId=s.id),o){const e=(0,r.getCurrentInstance)();"VueFlow"!==(null==e?void 0:e.type.name)&&s.emits.error(new ai(ii.USEVUEFLOW_OPTIONS))}return s}const Cr=(0,r.defineComponent)({name:"UserSelection",compatConfig:{MODE:3},props:{userSelectionRect:{}},setup:e=>(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vue-flow__selection vue-flow__container",style:(0,r.normalizeStyle)({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))}),Mr=["tabIndex"],Ir=(0,r.defineComponent)({name:"NodesSelection",compatConfig:{MODE:3},setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:a,userSelectionActive:l}=kr(),u=Li(),s=(0,r.ref)(null),c=Di({el:s,onStart(e){t.selectionDragStart(e)},onDrag(e){t.selectionDrag(e)},onStop(e){t.selectionDragStop(e)}});(0,r.onMounted)((()=>{var e;a.value||null==(e=s.value)||e.focus({preventScroll:!0})}));const d=(0,r.computed)((()=>zo(o.value))),f=(0,r.computed)((()=>({width:`${d.value.width}px`,height:`${d.value.height}px`,top:`${d.value.y}px`,left:`${d.value.x}px`})));function h(e){t.selectionContextMenu({event:e,nodes:o.value})}function p(e){a||go[e.key]&&(e.preventDefault(),u({x:go[e.key].x,y:go[e.key].y},e.shiftKey))}return(e,t)=>!(0,r.unref)(l)&&d.value.width&&d.value.height?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:(0,r.normalizeClass)(["vue-flow__nodesselection vue-flow__container",(0,r.unref)(i)]),style:(0,r.normalizeStyle)({transform:`translate(${(0,r.unref)(n).x}px,${(0,r.unref)(n).y}px) scale(${(0,r.unref)(n).zoom})`})},[(0,r.createElementVNode)("div",{ref_key:"el",ref:s,class:(0,r.normalizeClass)([{dragging:(0,r.unref)(c)},"vue-flow__nodesselection-rect"]),style:(0,r.normalizeStyle)(f.value),tabIndex:(0,r.unref)(a)?void 0:-1,onContextmenu:h,onKeydown:p},null,46,Mr)],6)):(0,r.createCommentVNode)("",!0)}}),Pr=(0,r.defineComponent)({name:"Pane",compatConfig:{MODE:3},props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:a,removeSelectedElements:l,userSelectionRect:u,elementsSelectable:s,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:f,removeNodes:h,removeEdges:p,selectionMode:v,deleteKeyCode:g,multiSelectionKeyCode:m,multiSelectionActive:y,edgeLookup:w,nodeLookup:x,connectionLookup:_,defaultEdgeOptions:b}=kr(),E=(0,r.ref)(null),S=(0,r.ref)(new Set),N=(0,r.ref)(new Set),k=(0,r.ref)(),C=(0,r.toRef)((()=>s.value&&(e.isSelecting||a.value)));let M=!1,I=!1;const P=fo(g,{actInsideInputWithModifier:!1}),A=fo(m);function B(e,t){return n=>{n.target===t&&(null==e||e(n))}}function T(e){M?M=!1:(i.paneClick(e),l(),c.value=!1)}function z(e){e.preventDefault(),e.stopPropagation(),i.paneContextMenu(e)}function D(e){i.paneScroll(e)}return(0,r.watch)(P,(e=>{e&&(h(f.value),p(d.value),c.value=!1)})),(0,r.watch)(A,(e=>{y.value=e})),(d,h)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{ref_key:"container",ref:E,class:(0,r.normalizeClass)(["vue-flow__pane vue-flow__container",{selection:d.isSelecting}]),onClick:h[0]||(h[0]=e=>C.value?void 0:B(T,E.value)(e)),onContextmenu:h[1]||(h[1]=e=>B(z,E.value)(e)),onWheelPassive:h[2]||(h[2]=e=>B(D,E.value)(e)),onPointerenter:h[3]||(h[3]=e=>C.value?void 0:(0,r.unref)(i).paneMouseEnter(e)),onPointerdown:h[4]||(h[4]=n=>C.value?function(n){var o,r,a;if(k.value=null==(o=t.value)?void 0:o.getBoundingClientRect(),!s.value||!e.isSelecting||0!==n.button||n.target!==E.value||!k.value)return;null==(a=null==(r=n.target)?void 0:r.setPointerCapture)||a.call(r,n.pointerId);const{x:c,y:d}=function(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}(n,k.value);I=!0,M=!1,l(),u.value={width:0,height:0,startX:c,startY:d,x:c,y:d},i.selectionStart(n)}(n):(0,r.unref)(i).paneMouseMove(n)),onPointermove:h[5]||(h[5]=e=>C.value?function(e){var t;if(!k.value||!u.value)return;M=!0;const{x:r,y:l}=si(e,k.value),{startX:s=0,startY:d=0}=u.value,f={startX:s,startY:d,x:r<s?r:s,y:l<d?l:d,width:Math.abs(r-s),height:Math.abs(l-d)},h=S.value,p=N.value;S.value=new Set(Do(n.value,f,o.value,v.value===io.Partial,!0).map((e=>e.id))),N.value=new Set;const g=(null==(t=b.value)?void 0:t.selectable)??!0;for(const e of S.value){const t=_.value.get(e);if(t)for(const{edgeId:e}of t.values()){const t=w.value.get(e);t&&(t.selectable??g)&&N.value.add(e)}}if(!Ci(h,S.value)){const e=Wo(x.value,S.value,!0);i.nodesChange(e)}if(!Ci(p,N.value)){const e=Wo(w.value,N.value);i.edgesChange(e)}u.value=f,a.value=!0,c.value=!1}(e):(0,r.unref)(i).paneMouseMove(e)),onPointerup:h[6]||(h[6]=t=>C.value?function(t){var n;0===t.button&&I&&(null==(n=t.target)||n.releasePointerCapture(t.pointerId),!a.value&&u.value&&t.target===E.value&&T(t),a.value=!1,u.value=null,c.value=S.value.size>0,i.selectionEnd(t),e.selectionKeyPressed&&(M=!1),I=!1)}(t):void 0),onPointerleave:h[7]||(h[7]=e=>(0,r.unref)(i).paneMouseLeave(e))},[(0,r.renderSlot)(d.$slots,"default"),(0,r.unref)(a)&&(0,r.unref)(u)?((0,r.openBlock)(),(0,r.createBlock)(Cr,{key:0,"user-selection-rect":(0,r.unref)(u)},null,8,["user-selection-rect"])):(0,r.createCommentVNode)("",!0),(0,r.unref)(c)&&(0,r.unref)(f).length?((0,r.openBlock)(),(0,r.createBlock)(Ir,{key:1})):(0,r.createCommentVNode)("",!0)],34))}}),Ar=(0,r.defineComponent)({name:"Transform",compatConfig:{MODE:3},setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=kr(),i=(0,r.computed)((()=>!!n.value&&!o.value)),a=(0,r.computed)((()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`));return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vue-flow__transformationpane vue-flow__container",style:(0,r.normalizeStyle)({transform:a.value,opacity:i.value?0:void 0})},[(0,r.renderSlot)(e.$slots,"default")],4))}}),Br=(0,r.defineComponent)({name:"Viewport",compatConfig:{MODE:3},setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:a,selectionKeyCode:l,panActivationKeyCode:u,panOnScroll:s,panOnScrollMode:c,panOnScrollSpeed:d,panOnDrag:f,zoomOnDoubleClick:h,zoomOnPinch:p,zoomOnScroll:v,preventScrolling:g,noWheelClassName:m,noPanClassName:y,emits:w,connectionStartHandle:x,userSelectionActive:_,paneDragging:b,d3Zoom:E,d3Selection:N,d3ZoomHandler:k,viewport:C,viewportRef:M,paneClickDistance:I}=kr();!function(e){const{emits:t,dimensions:n}=kr();let o;(0,r.onMounted)((()=>{const i=e.value,a=()=>{if(!i)return;const e=wo(i);0!==e.width&&0!==e.height||t.error(new ai(ii.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:e.width||500,height:e.height||500}};a(),window.addEventListener("resize",a),i&&(o=new ResizeObserver((()=>a())),o.observe(i)),(0,r.onBeforeUnmount)((()=>{window.removeEventListener("resize",a),o&&i&&o.unobserve(i)}))}))}(M);const P=(0,r.ref)(!1),A=(0,r.ref)(!1);let B=null,T=!1,z=0,D={x:0,y:0,zoom:0};const O=fo(u),$=fo(l),V=fo(a),R=(0,r.toRef)((()=>(!$.value||$.value&&!0===l.value)&&(O.value||f.value))),L=(0,r.toRef)((()=>O.value||s.value)),H=(0,r.toRef)((()=>$.value||!0===l.value&&!0!==R.value));function Y(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)}function G(e){const t=e.ctrlKey&&ci()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t}function F(e){return{x:e.x,y:e.y,zoom:e.k}}function X(e,t){return e.target.closest(`.${t}`)}return(0,r.onMounted)((()=>{if(!M.value)return void yi("Viewport element is missing");const e=M.value,a=e.getBoundingClientRect(),u=function(){var e,t,n,o=Kn,i=Jn,r=no,a=eo,l=to,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Wt,f=S("start","zoom","end"),h=0,p=10;function v(e){e.property("__zoom",Qn).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",N).filter(l).on("touchstart.zoom",k).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new jn(t,e.x,e.y)}function m(e,t,n){var o=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return o===e.x&&i===e.y?e:new jn(e.k,o,i)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,o){e.on("start.zoom",(function(){x(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,r=arguments,a=x(e,r).event(o),l=i.apply(e,r),u=null==n?y(l):"function"==typeof n?n.apply(e,r):n,s=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),c=e.__zoom,f="function"==typeof t?t.apply(e,r):t,h=d(c.invert(u).concat(s/c.k),f.invert(u).concat(s/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=s/t[2];e=new jn(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}}))}function x(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function b(e,...t){if(o.apply(this,arguments)){var n=x(this,t).event(e),i=this.__zoom,l=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,a.apply(this,arguments)))),c=Le(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===l)return;n.mouse=[c,i.invert(c)],xn(this),n.start()}qn(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",r(m(g(i,l),n.mouse[0],n.mouse[1]),n.extent,s))}}function E(e,...t){if(!n&&o.apply(this,arguments)){var i=e.currentTarget,a=x(this,t,!0).event(e),l=Re(e.view).on("mousemove.zoom",(function(e){if(qn(e),!a.moved){var t=e.clientX-c,n=e.clientY-d;a.moved=t*t+n*n>h}a.event(e).zoom("mouse",r(m(a.that.__zoom,a.mouse[0]=Le(e,i),a.mouse[1]),a.extent,s))}),!0).on("mouseup.zoom",(function(e){l.on("mousemove.zoom mouseup.zoom",null),Ue(e.view,a.moved),qn(e),a.event(e).end()}),!0),u=Le(e,i),c=e.clientX,d=e.clientY;Xe(e.view),Zn(e),a.mouse=[u,this.__zoom.invert(u)],xn(this),a.start()}}function N(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=Le(e.changedTouches?e.changedTouches[0]:e,this),l=n.invert(a),u=n.k*(e.shiftKey?.5:2),d=r(m(g(n,u),a,l),i.apply(this,t),s);qn(e),c>0?Re(this).transition().duration(c).call(w,d,a,e):Re(this).call(v.transform,d,a,e)}}function k(n,...i){if(o.apply(this,arguments)){var r,a,l,u,s=n.touches,c=s.length,d=x(this,i,n.changedTouches.length===c).event(n);for(Zn(n),a=0;a<c;++a)u=[u=Le(l=s[a],this),this.__zoom.invert(u),l.identifier],d.touch0?d.touch1||d.touch0[2]===u[2]||(d.touch1=u,d.taps=0):(d.touch0=u,r=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),r&&(d.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),500)),xn(this),d.start())}}function C(e,...t){if(this.__zooming){var n,o,i,a,l=x(this,t).event(e),u=e.changedTouches,c=u.length;for(qn(e),n=0;n<c;++n)i=Le(o=u[n],this),l.touch0&&l.touch0[2]===o.identifier?l.touch0[0]=i:l.touch1&&l.touch1[2]===o.identifier&&(l.touch1[0]=i);if(o=l.that.__zoom,l.touch1){var d=l.touch0[0],f=l.touch0[1],h=l.touch1[0],p=l.touch1[1],v=(v=h[0]-d[0])*v+(v=h[1]-d[1])*v,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;o=g(o,Math.sqrt(v/y)),i=[(d[0]+h[0])/2,(d[1]+h[1])/2],a=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!l.touch0)return;i=l.touch0[0],a=l.touch0[1]}l.zoom("touch",r(m(o,i,a),l.extent,s))}}function M(e,...o){if(this.__zooming){var i,r,a=x(this,o).event(e),l=e.changedTouches,u=l.length;for(Zn(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),i=0;i<u;++i)r=l[i],a.touch0&&a.touch0[2]===r.identifier?delete a.touch0:a.touch1&&a.touch1[2]===r.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(r=Le(r,this),Math.hypot(t[0]-r[0],t[1]-r[1])<p)){var s=Re(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return v.transform=function(e,t,n,o){var i=e.selection?e.selection():e;i.property("__zoom",Qn),e!==i?w(e,t,n,o):i.interrupt().each((function(){x(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},v.scaleBy=function(e,t,n,o){v.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},v.scaleTo=function(e,t,n,o){v.transform(e,(function(){var e=i.apply(this,arguments),o=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,l=o.invert(a),u="function"==typeof t?t.apply(this,arguments):t;return r(m(g(o,u),a,l),e,s)}),n,o)},v.translateBy=function(e,t,n,o){v.transform(e,(function(){return r(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),s)}),null,o)},v.translateTo=function(e,t,n,o,a){v.transform(e,(function(){var e=i.apply(this,arguments),a=this.__zoom,l=null==o?y(e):"function"==typeof o?o.apply(this,arguments):o;return r(Wn.translate(l[0],l[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,s)}),o,a)},_.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Re(this.that).datum();f.call(e,this.that,new Un(e,{sourceEvent:this.sourceEvent,target:v,type:e,transform:this.that.__zoom,dispatch:f}),t)}},v.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Xn(+e),v):a},v.filter=function(e){return arguments.length?(o="function"==typeof e?e:Xn(!!e),v):o},v.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Xn(!!e),v):l},v.extent=function(e){return arguments.length?(i="function"==typeof e?e:Xn([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),v):i},v.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],v):[u[0],u[1]]},v.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],v):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},v.constrain=function(e){return arguments.length?(r=e,v):r},v.duration=function(e){return arguments.length?(c=+e,v):c},v.interpolate=function(e){return arguments.length?(d=e,v):d},v.on=function(){var e=f.on.apply(f,arguments);return e===f?v:e},v.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,v):Math.sqrt(h)},v.tapDistance=function(e){return arguments.length?(p=+e,v):p},v}().clickDistance(I.value).scaleExtent([t.value,n.value]).translateExtent(i.value),x=Re(e).call(u),$=x.on("wheel.zoom"),H=Wn.translate(o.value.x??0,o.value.y??0).scale(xo(o.value.zoom??1,t.value,n.value)),U=[[0,0],[a.width,a.height]],j=u.constrain()(H,U,i.value);u.transform(x,j),u.wheelDelta(G),E.value=u,N.value=x,k.value=$,C.value={x:j.x,y:j.y,zoom:j.k},u.on("start",(e=>{var t;if(!e.sourceEvent)return null;z=e.sourceEvent.button,P.value=!0;const n=F(e.transform);"mousedown"===(null==(t=e.sourceEvent)?void 0:t.type)&&(b.value=!0),D=n,w.viewportChangeStart(n),w.moveStart({event:e,flowTransform:n})})),u.on("end",(e=>{if(!e.sourceEvent)return null;if(P.value=!1,b.value=!1,Y(R.value,z??0)&&!T&&w.paneContextMenu(e.sourceEvent),T=!1,t=D,n=e.transform,t.x!==n.x&&!Number.isNaN(n.x)||t.y!==n.y&&!Number.isNaN(n.y)||t.zoom!==n.k&&!Number.isNaN(n.k)){const t=F(e.transform);D=t,w.viewportChangeEnd(t),w.moveEnd({event:e,flowTransform:t})}var t,n})),u.filter((e=>{var t;const n=V.value||v.value,o=p.value&&e.ctrlKey,i=e.button;if(1===i&&"mousedown"===e.type&&(X(e,"vue-flow__node")||X(e,"vue-flow__edge")))return!0;if(!(R.value||n||L.value||h.value||p.value))return!1;if(_.value)return!1;if(!h.value&&"dblclick"===e.type)return!1;if(X(e,m.value)&&"wheel"===e.type)return!1;if(X(e,y.value)&&("wheel"!==e.type||L.value&&"wheel"===e.type&&!V.value))return!1;if(!p.value&&e.ctrlKey&&"wheel"===e.type)return!1;if(!n&&!L.value&&!o&&"wheel"===e.type)return!1;if(!p&&"touchstart"===e.type&&(null==(t=e.touches)?void 0:t.length)>1)return e.preventDefault(),!1;if(!R.value&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(!0===l.value&&Array.isArray(f.value)&&f.value.includes(0)&&0===i)return!1;if(Array.isArray(f.value)&&!f.value.includes(i)&&("mousedown"===e.type||"touchstart"===e.type))return!1;const r=Array.isArray(f.value)&&f.value.includes(i)||!0===l.value&&Array.isArray(f.value)&&!f.value.includes(0)||!i||i<=1;return(!e.ctrlKey||O.value||"wheel"===e.type)&&r})),(0,r.watch)([_,R],(()=>{_.value&&!P.value?u.on("zoom",null):_.value||u.on("zoom",(e=>{C.value={x:e.transform.x,y:e.transform.y,zoom:e.transform.k};const t=F(e.transform);T=Y(R.value,z??0),w.viewportChange(t),w.move({event:e,flowTransform:t})}))}),{immediate:!0}),(0,r.watch)([_,L,c,V,p,g,m],(()=>{!L.value||V.value||_.value?void 0!==$&&x.on("wheel.zoom",(function(e,t){const n=!g.value&&"wheel"===e.type&&!e.ctrlKey,o=V.value||v.value,i=p.value&&e.ctrlKey;if(!o&&!s.value&&!i&&"wheel"===e.type||n||X(e,m.value))return null;e.preventDefault(),$.call(this,e,t)}),{passive:!1}):x.on("wheel.zoom",(e=>{if(X(e,m.value))return!1;const t=V.value||v.value,n=p.value&&e.ctrlKey;if(g.value&&!L.value&&!t&&!n)return!1;e.preventDefault(),e.stopImmediatePropagation();const o=x.property("__zoom").k||1,i=ci();if(!O.value&&e.ctrlKey&&p.value&&i){const t=Le(e),n=o*2**G(e);return void u.scaleTo(x,n,t,e)}const r=1===e.deltaMode?20:1;let a=c.value===uo.Vertical?0:e.deltaX*r,l=c.value===uo.Horizontal?0:e.deltaY*r;!i&&e.shiftKey&&c.value!==uo.Vertical&&!a&&l&&(a=l,l=0),u.translateBy(x,-a/o*d.value,-l/o*d.value);const s=F(x.property("__zoom"));B&&clearTimeout(B),A.value?(w.move({event:e,flowTransform:s}),w.viewportChange(s),B=setTimeout((()=>{w.moveEnd({event:e,flowTransform:s}),w.viewportChangeEnd(s),A.value=!1}),150)):(A.value=!0,w.moveStart({event:e,flowTransform:s}),w.viewportChangeStart(s))}),{passive:!1})}),{immediate:!0})})),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{ref_key:"viewportRef",ref:M,class:"vue-flow__viewport vue-flow__container"},[(0,r.createVNode)(Pr,{"is-selecting":H.value,"selection-key-pressed":(0,r.unref)($),class:(0,r.normalizeClass)({connecting:!!(0,r.unref)(x),dragging:(0,r.unref)(b),draggable:!0===(0,r.unref)(f)||Array.isArray((0,r.unref)(f))&&(0,r.unref)(f).includes(0)})},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(Ar,null,{default:(0,r.withCtx)((()=>[(0,r.renderSlot)(e.$slots,"default")])),_:3})])),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Tr=["id"],zr=["id"],Dr=["id"],Or=(0,r.defineComponent)({name:"A11yDescriptions",compatConfig:{MODE:3},setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=kr();return(e,i)=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createElementVNode)("div",{id:`${(0,r.unref)(ho)}-${(0,r.unref)(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+(0,r.toDisplayString)((0,r.unref)(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Tr),(0,r.createElementVNode)("div",{id:`${(0,r.unref)(po)}-${(0,r.unref)(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,zr),(0,r.unref)(n)?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,id:`${(0,r.unref)("vue-flow__aria-live")}-${(0,r.unref)(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},(0,r.toDisplayString)((0,r.unref)(o)),9,Dr))],64))}});function $r(e,t,n){return n===oo.Left?e-t:n===oo.Right?e+t:e}function Vr(e,t,n){return n===oo.Top?e-t:n===oo.Bottom?e+t:e}const Rr=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=oo.Top,type:i}){return(0,r.h)("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:$r(t,e,o),cy:Vr(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Rr.props=["radius","centerX","centerY","position","type"],Rr.compatConfig={MODE:3};const Lr=Rr,Hr=(0,r.defineComponent)({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:l,noPanClassName:u,getEdgeTypes:s,removeSelectedEdges:c,findEdge:d,findNode:f,isValidConnection:h,multiSelectionActive:p,disableKeyboardA11y:v,elementsSelectable:g,edgesUpdatable:m,edgesFocusable:y,hooks:w}=kr(),x=(0,r.computed)((()=>d(e.id))),{emit:_,on:b}=function(e,t){const n={doubleClick:Zo(),click:Zo(),mouseEnter:Zo(),mouseMove:Zo(),mouseLeave:Zo(),contextMenu:Zo(),updateStart:Zo(),update:Zo(),updateEnd:Zo()};return n.doubleClick.on((n=>{var o,i;t.edgeDoubleClick(n),null==(i=null==(o=e.events)?void 0:o.doubleClick)||i.call(o,n)})),n.click.on((n=>{var o,i;t.edgeClick(n),null==(i=null==(o=e.events)?void 0:o.click)||i.call(o,n)})),n.mouseEnter.on((n=>{var o,i;t.edgeMouseEnter(n),null==(i=null==(o=e.events)?void 0:o.mouseEnter)||i.call(o,n)})),n.mouseMove.on((n=>{var o,i;t.edgeMouseMove(n),null==(i=null==(o=e.events)?void 0:o.mouseMove)||i.call(o,n)})),n.mouseLeave.on((n=>{var o,i;t.edgeMouseLeave(n),null==(i=null==(o=e.events)?void 0:o.mouseLeave)||i.call(o,n)})),n.contextMenu.on((n=>{var o,i;t.edgeContextMenu(n),null==(i=null==(o=e.events)?void 0:o.contextMenu)||i.call(o,n)})),n.updateStart.on((n=>{var o,i;t.edgeUpdateStart(n),null==(i=null==(o=e.events)?void 0:o.updateStart)||i.call(o,n)})),n.update.on((n=>{var o,i;t.edgeUpdate(n),null==(i=null==(o=e.events)?void 0:o.update)||i.call(o,n)})),n.updateEnd.on((n=>{var o,i;t.edgeUpdateEnd(n),null==(i=null==(o=e.events)?void 0:o.updateEnd)||i.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}(x.value,a),E=(0,r.inject)(zi),S=(0,r.getCurrentInstance)(),N=(0,r.ref)(!1),k=(0,r.ref)(!1),C=(0,r.ref)(""),M=(0,r.ref)(null),I=(0,r.ref)("source"),P=(0,r.ref)(null),A=(0,r.toRef)((()=>void 0===x.value.selectable?g.value:x.value.selectable)),B=(0,r.toRef)((()=>void 0===x.value.updatable?m.value:x.value.updatable)),T=(0,r.toRef)((()=>void 0===x.value.focusable?y.value:x.value.focusable));(0,r.provide)(Bi,e.id),(0,r.provide)(Ti,P);const z=(0,r.computed)((()=>x.value.class instanceof Function?x.value.class(x.value):x.value.class)),D=(0,r.computed)((()=>x.value.style instanceof Function?x.value.style(x.value):x.value.style)),O=(0,r.computed)((()=>{const e=x.value.type||"default",t=null==E?void 0:E[`edge-${e}`];if(t)return t;let n=x.value.template??s.value[e];if("string"==typeof n&&S){const t=Object.keys(S.appContext.components);t&&t.includes(e)&&(n=(0,r.resolveComponent)(e,!1))}return n&&"string"!=typeof n?n:(a.error(new ai(ii.EDGE_TYPE_MISSING,n)),!1)})),{handlePointerDown:$}=Vi({nodeId:C,handleId:M,type:I,isValidConnection:h,edgeUpdaterType:I,onEdgeUpdate:function(e,t){_.update({event:e,edge:x.value,connection:t})},onEdgeUpdateEnd:function(e){_.updateEnd({event:e,edge:x.value}),k.value=!1}});return()=>{const n=f(x.value.source),l=f(x.value.target),c="pathOptions"in x.value?x.value.pathOptions:{};if(!n&&!l)return a.error(new ai(ii.EDGE_SOURCE_TARGET_MISSING,x.value.id,x.value.source,x.value.target)),null;if(!n)return a.error(new ai(ii.EDGE_SOURCE_MISSING,x.value.id,x.value.source)),null;if(!l)return a.error(new ai(ii.EDGE_TARGET_MISSING,x.value.id,x.value.target)),null;if(!x.value||x.value.hidden||n.hidden||l.hidden)return null;let d;d=o.value===ao.Strict?n.handleBounds.source:[...n.handleBounds.source||[],...n.handleBounds.target||[]];const h=ti(d,x.value.sourceHandle);let p;p=o.value===ao.Strict?l.handleBounds.target:[...l.handleBounds.target||[],...l.handleBounds.source||[]];const v=ti(p,x.value.targetHandle),g=(null==h?void 0:h.position)||oo.Bottom,m=(null==v?void 0:v.position)||oo.Top,{x:y,y:_}=ei(n,h,g),{x:E,y:S}=ei(l,v,m);return x.value.sourceX=y,x.value.sourceY=_,x.value.targetX=E,x.value.targetY=S,(0,r.h)("g",{ref:P,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${!1===O.value?"default":x.value.type||"default"}`,u.value,z.value,{updating:N.value,selected:x.value.selected,animated:x.value.animated,inactive:!A.value&&!w.value.edgeClick.hasListeners()}],onClick:H,onContextmenu:Y,onDblclick:G,onMouseenter:F,onMousemove:X,onMouseleave:U,onKeyDown:T.value?Z:void 0,tabIndex:T.value?0:void 0,"aria-label":null===x.value.ariaLabel?void 0:x.value.ariaLabel||`Edge from ${x.value.source} to ${x.value.target}`,"aria-describedby":T.value?`${po}-${t}`:void 0,role:T.value?"button":"img"},[k.value?null:(0,r.h)(!1===O.value?s.value.default:O.value,{id:e.id,sourceNode:n,targetNode:l,source:x.value.source,target:x.value.target,type:x.value.type,updatable:B.value,selected:x.value.selected,animated:x.value.animated,label:x.value.label,labelStyle:x.value.labelStyle,labelShowBg:x.value.labelShowBg,labelBgStyle:x.value.labelBgStyle,labelBgPadding:x.value.labelBgPadding,labelBgBorderRadius:x.value.labelBgBorderRadius,data:x.value.data,events:{...x.value.events,...b},style:D.value,markerStart:`url('#${Ro(x.value.markerStart,t)}')`,markerEnd:`url('#${Ro(x.value.markerEnd,t)}')`,sourcePosition:g,targetPosition:m,sourceX:y,sourceY:_,targetX:E,targetY:S,sourceHandleId:x.value.sourceHandle,targetHandleId:x.value.targetHandle,interactionWidth:x.value.interactionWidth,...c}),["source"===B.value||!0===B.value?[(0,r.h)("g",{onMousedown:j,onMouseenter:V,onMouseout:R},(0,r.h)(Lr,{position:g,centerX:y,centerY:_,radius:i.value,type:"source","data-type":"source"}))]:null,"target"===B.value||!0===B.value?[(0,r.h)("g",{onMousedown:W,onMouseenter:V,onMouseout:R},(0,r.h)(Lr,{position:m,centerX:E,centerY:S,radius:i.value,type:"target","data-type":"target"}))]:null]])};function V(){N.value=!0}function R(){N.value=!1}function L(e,t){0===e.button&&(k.value=!0,C.value=t?x.value.target:x.value.source,M.value=(t?x.value.targetHandle:x.value.sourceHandle)??"",I.value=t?"target":"source",_.updateStart({event:e,edge:x.value}),$(e))}function H(e){var t;const o={event:e,edge:x.value};A.value&&(l.value=!1,x.value.selected&&p.value?(c([x.value]),null==(t=P.value)||t.blur()):n([x.value])),_.click(o)}function Y(e){_.contextMenu({event:e,edge:x.value})}function G(e){_.doubleClick({event:e,edge:x.value})}function F(e){_.mouseEnter({event:e,edge:x.value})}function X(e){_.mouseMove({event:e,edge:x.value})}function U(e){_.mouseLeave({event:e,edge:x.value})}function j(e){L(e,!0)}function W(e){L(e,!1)}function Z(t){var o;!v.value&&vo.includes(t.key)&&A.value&&("Escape"===t.key?(null==(o=P.value)||o.blur(),c([d(e.id)])):n([d(e.id)]))}}}),Yr=(0,r.defineComponent)({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:a,connectionLineType:l,connectionLineStyle:u,connectionLineOptions:s,connectionStatus:c,viewport:d,findNode:f}=kr(),h=null==(e=(0,r.inject)(zi))?void 0:e["connection-line"],p=(0,r.computed)((()=>{var e;return f(null==(e=o.value)?void 0:e.nodeId)})),v=(0,r.computed)((()=>{var e;return f(null==(e=i.value)?void 0:e.nodeId)??null})),g=(0,r.computed)((()=>({x:(a.value.x-d.value.x)/d.value.zoom,y:(a.value.y-d.value.y)/d.value.zoom}))),m=(0,r.computed)((()=>s.value.markerStart?`url(#${Ro(s.value.markerStart,t)})`:"")),y=(0,r.computed)((()=>s.value.markerEnd?`url(#${Ro(s.value.markerEnd,t)})`:""));return()=>{var e,t,a;if(!p.value||!o.value)return null;const d=o.value.id,f=o.value.type,w=p.value.handleBounds;let x=(null==w?void 0:w[f])||[];if(n.value===ao.Loose){const e=(null==w?void 0:w["source"===f?"target":"source"])||[];x=[...x,...e]}if(!x)return null;const _=(d?x.find((e=>e.id===d)):x[0])??null,b=(null==_?void 0:_.position)||oo.Top,{x:E,y:S}=ei(p.value,_,b);let N=null;v.value&&(N=n.value===ao.Strict?(null==(e=v.value.handleBounds["source"===f?"target":"source"])?void 0:e.find((e=>{var t;return e.id===(null==(t=i.value)?void 0:t.id)})))||null:(null==(t=[...v.value.handleBounds.source||[],...v.value.handleBounds.target||[]])?void 0:t.find((e=>{var t;return e.id===(null==(t=i.value)?void 0:t.id)})))||null);const k=(null==(a=i.value)?void 0:a.position)??(b?gi[b]:null);if(!b||!k)return null;const C=l.value??s.value.type??ro.Bezier;let M="";const I={sourceX:E,sourceY:S,sourcePosition:b,targetX:g.value.x,targetY:g.value.y,targetPosition:k};return C===ro.Bezier?[M]=fr(I):C===ro.Step?[M]=mr({...I,borderRadius:0}):C===ro.SmoothStep?[M]=mr(I):C===ro.SimpleBezier?[M]=pr(I):M=`M${E},${S} ${g.value.x},${g.value.y}`,(0,r.h)("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},(0,r.h)("g",{class:"vue-flow__connection"},h?(0,r.h)(h,{sourceX:E,sourceY:S,sourcePosition:b,targetX:g.value.x,targetY:g.value.y,targetPosition:k,sourceNode:p.value,sourceHandle:_,targetNode:v.value,targetHandle:N,markerEnd:y.value,markerStart:m.value,connectionStatus:c.value}):(0,r.h)("path",{d:M,class:[s.value.class,c,"vue-flow__connection-path"],style:{...u.value,...s.value.style},"marker-end":y.value,"marker-start":m.value})))}}}),Gr=["id","markerWidth","markerHeight","markerUnits","orient"],Fr=(0,r.defineComponent)({name:"MarkerType",compatConfig:{MODE:3},props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup:e=>(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===(0,r.unref)(lo).ArrowClosed?((0,r.openBlock)(),(0,r.createElementBlock)("polyline",{key:0,style:(0,r.normalizeStyle)({stroke:e.color,fill:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):(0,r.createCommentVNode)("",!0),e.type===(0,r.unref)(lo).Arrow?((0,r.openBlock)(),(0,r.createElementBlock)("polyline",{key:1,style:(0,r.normalizeStyle)({stroke:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):(0,r.createCommentVNode)("",!0)],8,Gr))}),Xr={class:"vue-flow__marker vue-flow__container"},Ur=(0,r.defineComponent)({name:"MarkerDefinitions",compatConfig:{MODE:3},setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=kr(),a=(0,r.computed)((()=>{const e=new Set,r=[],a=n=>{if(n){const o=Ro(n,t);e.has(o)||("object"==typeof n?r.push({...n,id:o,color:n.color||i.value}):r.push({id:o,color:i.value,type:n}),e.add(o))}};for(const e of[o.value.markerEnd,o.value.markerStart])a(e);for(const e of n.value)for(const t of[e.markerStart,e.markerEnd])a(t);return r.sort(((e,t)=>e.id.localeCompare(t.id)))}));return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("svg",Xr,[(0,r.createElementVNode)("defs",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.value,(e=>((0,r.openBlock)(),(0,r.createBlock)(Fr,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"])))),128))])]))}}),jr=(0,r.defineComponent)({name:"Edges",compatConfig:{MODE:3},setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=kr();return(e,i)=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createVNode)(Ur),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(n),(e=>((0,r.openBlock)(),(0,r.createElementBlock)("svg",{key:e.id,class:"vue-flow__edges vue-flow__container",style:(0,r.normalizeStyle)({zIndex:(0,r.unref)(oi)(e,(0,r.unref)(t),(0,r.unref)(o))})},[(0,r.createVNode)((0,r.unref)(Hr),{id:e.id},null,8,["id"])],4)))),128)),(0,r.createVNode)((0,r.unref)(Yr))],64))}}),Wr=(0,r.defineComponent)({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:a,emits:l,removeSelectedNodes:u,addSelectedNodes:s,updateNodeDimensions:c,onUpdateNodeInternals:d,getNodeTypes:f,nodeExtent:h,elevateNodesOnSelect:p,disableKeyboardA11y:v,ariaLiveMessage:g,snapToGrid:y,snapGrid:w,nodeDragThreshold:x,nodesDraggable:_,elementsSelectable:b,nodesConnectable:E,nodesFocusable:S,hooks:N}=kr(),k=(0,r.ref)(null);(0,r.provide)(Ai,k),(0,r.provide)(Pi,e.id);const C=(0,r.inject)(zi),M=(0,r.getCurrentInstance)(),I=Li(),{node:P,parentNode:A}=Ri(e.id),{emit:B,on:T}=function(e,t){const n={doubleClick:Zo(),click:Zo(),mouseEnter:Zo(),mouseMove:Zo(),mouseLeave:Zo(),contextMenu:Zo(),dragStart:Zo(),drag:Zo(),dragStop:Zo()};return n.doubleClick.on((n=>{var o,i;t.nodeDoubleClick(n),null==(i=null==(o=e.events)?void 0:o.doubleClick)||i.call(o,n)})),n.click.on((n=>{var o,i;t.nodeClick(n),null==(i=null==(o=e.events)?void 0:o.click)||i.call(o,n)})),n.mouseEnter.on((n=>{var o,i;t.nodeMouseEnter(n),null==(i=null==(o=e.events)?void 0:o.mouseEnter)||i.call(o,n)})),n.mouseMove.on((n=>{var o,i;t.nodeMouseMove(n),null==(i=null==(o=e.events)?void 0:o.mouseMove)||i.call(o,n)})),n.mouseLeave.on((n=>{var o,i;t.nodeMouseLeave(n),null==(i=null==(o=e.events)?void 0:o.mouseLeave)||i.call(o,n)})),n.contextMenu.on((n=>{var o,i;t.nodeContextMenu(n),null==(i=null==(o=e.events)?void 0:o.contextMenu)||i.call(o,n)})),n.dragStart.on((n=>{var o,i;t.nodeDragStart(n),null==(i=null==(o=e.events)?void 0:o.dragStart)||i.call(o,n)})),n.drag.on((n=>{var o,i;t.nodeDrag(n),null==(i=null==(o=e.events)?void 0:o.drag)||i.call(o,n)})),n.dragStop.on((n=>{var o,i;t.nodeDragStop(n),null==(i=null==(o=e.events)?void 0:o.dragStop)||i.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}(P,l),z=(0,r.toRef)((()=>void 0===P.draggable?_.value:P.draggable)),D=(0,r.toRef)((()=>void 0===P.selectable?b.value:P.selectable)),O=(0,r.toRef)((()=>void 0===P.connectable?E.value:P.connectable)),$=(0,r.toRef)((()=>void 0===P.focusable?S.value:P.focusable)),V=(0,r.toRef)((()=>D.value||z.value||N.value.nodeClick.hasListeners()||N.value.nodeDoubleClick.hasListeners()||N.value.nodeMouseEnter.hasListeners()||N.value.nodeMouseMove.hasListeners()||N.value.nodeMouseLeave.hasListeners())),R=(0,r.toRef)((()=>!!P.dimensions.width&&!!P.dimensions.height)),L=(0,r.computed)((()=>{const e=P.type||"default",t=null==C?void 0:C[`node-${e}`];if(t)return t;let n=P.template||f.value[e];if("string"==typeof n&&M){const t=Object.keys(M.appContext.components);t&&t.includes(e)&&(n=(0,r.resolveComponent)(e,!1))}return n&&"string"!=typeof n?n:(l.error(new ai(ii.NODE_TYPE_MISSING,n)),!1)})),H=Di({id:e.id,el:k,disabled:()=>!z.value,selectable:D,dragHandle:()=>P.dragHandle,onStart(e){B.dragStart(e)},onDrag(e){B.drag(e)},onStop(e){B.dragStop(e)},onClick(e){J(e)}}),Y=(0,r.computed)((()=>P.class instanceof Function?P.class(P):P.class)),G=(0,r.computed)((()=>{const e=(P.style instanceof Function?P.style(P):P.style)||{},t=P.width instanceof Function?P.width(P):P.width,n=P.height instanceof Function?P.height(P):P.height;return!e.width&&t&&(e.width="string"==typeof t?t:`${t}px`),!e.height&&n&&(e.height="string"==typeof n?n:`${n}px`),e})),F=(0,r.toRef)((()=>Number(P.zIndex??G.value.zIndex??0)));return d((t=>{!t.includes(e.id)&&t.length||U()})),(0,r.onMounted)((()=>{(0,r.watch)((()=>P.hidden),((t=!1,n,o)=>{!t&&k.value&&(e.resizeObserver.observe(k.value),o((()=>{k.value&&e.resizeObserver.unobserve(k.value)})))}),{immediate:!0,flush:"post"})})),(0,r.watch)([()=>P.type,()=>P.sourcePosition,()=>P.targetPosition],(()=>{(0,r.nextTick)((()=>{c([{id:e.id,nodeElement:k.value,forceUpdate:!0}])}))})),(0,r.watch)([()=>P.position.x,()=>P.position.y,()=>{var e;return null==(e=A.value)?void 0:e.computedPosition.x},()=>{var e;return null==(e=A.value)?void 0:e.computedPosition.y},()=>{var e;return null==(e=A.value)?void 0:e.computedPosition.z},F,()=>P.selected,()=>P.dimensions.height,()=>P.dimensions.width,()=>{var e;return null==(e=A.value)?void 0:e.dimensions.height},()=>{var e;return null==(e=A.value)?void 0:e.dimensions.width}],(([e,t,n,o,i,r])=>{const a={x:e,y:t,z:r+(p.value&&P.selected?1e3:0)};var l,u;P.computedPosition=void 0!==n&&void 0!==o?{x:(u=a).x+(l={x:n,y:o,z:i}).x,y:u.y+l.y,z:(l.z>u.z?l.z:u.z)+1}:a}),{flush:"post",immediate:!0}),(0,r.watch)([()=>P.extent,h],(([e,t],[n,o])=>{e===n&&t===o||X()})),"parent"===P.extent||"object"==typeof P.extent&&"range"in P.extent&&"parent"===P.extent.range?m((()=>R)).toBe(!0).then(X):X(),()=>P.hidden?null:(0,r.h)("div",{ref:k,"data-id":P.id,class:["vue-flow__node",`vue-flow__node-${!1===L.value?"default":P.type||"default"}`,{[n.value]:z.value,dragging:null==H?void 0:H.value,draggable:z.value,selected:P.selected,selectable:D.value,parent:P.isParent},Y.value],style:{visibility:R.value?"visible":"hidden",zIndex:P.computedPosition.z??F.value,transform:`translate(${P.computedPosition.x}px,${P.computedPosition.y}px)`,pointerEvents:V.value?"all":"none",...G.value},tabIndex:$.value?0:void 0,role:$.value?"button":void 0,"aria-describedby":v.value?void 0:`${ho}-${t}`,"aria-label":P.ariaLabel,onMouseenter:j,onMousemove:W,onMouseleave:Z,onContextmenu:q,onClick:J,onDblclick:K,onKeydown:Q},[(0,r.h)(!1===L.value?f.value.default:L.value,{id:P.id,type:P.type,data:P.data,events:{...P.events,...T},selected:P.selected,resizing:P.resizing,dragging:H.value,connectable:O.value,position:P.computedPosition,dimensions:P.dimensions,isValidTargetPos:P.isValidTargetPos,isValidSourcePos:P.isValidSourcePos,parent:P.parentNode,parentNodeId:P.parentNode,zIndex:P.computedPosition.z??F.value,targetPosition:P.targetPosition,sourcePosition:P.sourcePosition,label:P.label,dragHandle:P.dragHandle,onUpdateNodeInternals:U})]);function X(){const e=P.computedPosition,{computedPosition:t,position:n}=Qo(P,y.value?di(e,w.value):e,l.error,h.value,A.value);P.computedPosition.x===t.x&&P.computedPosition.y===t.y||(P.computedPosition={...P.computedPosition,...t}),P.position.x===n.x&&P.position.y===n.y||(P.position=n)}function U(){k.value&&c([{id:e.id,nodeElement:k.value,forceUpdate:!0}])}function j(e){(null==H?void 0:H.value)||B.mouseEnter({event:e,node:P})}function W(e){(null==H?void 0:H.value)||B.mouseMove({event:e,node:P})}function Z(e){(null==H?void 0:H.value)||B.mouseLeave({event:e,node:P})}function q(e){return B.contextMenu({event:e,node:P})}function K(e){return B.doubleClick({event:e,node:P})}function J(e){D.value&&(!o.value||!z.value||x.value>0)&&_i(P,a.value,s,u,i,!1,k.value),B.click({event:e,node:P})}function Q(e){if(!so(e)&&!v.value)if(vo.includes(e.key)&&D.value){const t="Escape"===e.key;_i(P,a.value,s,u,i,t,k.value)}else z.value&&P.selected&&go[e.key]&&(e.preventDefault(),g.value=`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~P.position.x}, y: ${~~P.position.y}`,I({x:go[e.key].x,y:go[e.key].y},e.shiftKey))}}}),Zr={class:"vue-flow__nodes vue-flow__container"},qr=(0,r.defineComponent)({name:"Nodes",compatConfig:{MODE:3},setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=kr(),i=function(e={includeHiddenNodes:!1}){const{nodes:t}=kr();return(0,r.computed)((()=>{if(0===t.value.length)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(void 0===(null==n?void 0:n.handleBounds)||0===n.dimensions.width||0===n.dimensions.height))return!1;return!0}))}(),a=(0,r.ref)();return(0,r.watch)(i,(e=>{e&&(0,r.nextTick)((()=>{o.nodesInitialized(t.value)}))}),{immediate:!0}),(0,r.onMounted)((()=>{a.value=new ResizeObserver((e=>{const t=e.map((e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})));(0,r.nextTick)((()=>n(t)))}))})),(0,r.onBeforeUnmount)((()=>{var e;return null==(e=a.value)?void 0:e.disconnect()})),(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Zr,[a.value?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)((0,r.unref)(t),((e,t,n,o)=>{const i=[e.id];if(o&&o.key===e.id&&(0,r.isMemoSame)(o,i))return o;const l=((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(Wr),{id:e.id,key:e.id,"resize-observer":a.value},null,8,["id","resize-observer"]));return l.memo=i,l}),n,0),128)):(0,r.createCommentVNode)("",!0)]))}}),Kr=(0,r.createElementVNode)("div",{class:"vue-flow__edge-labels"},null,-1),Jr=(0,r.defineComponent)({name:"VueFlow",compatConfig:{MODE:3},props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=(0,r.useSlots)(),l=b(o,"modelValue",n),u=b(o,"nodes",n),s=b(o,"edges",n),c=kr(o),d=function(e,t,n){const o=(0,r.effectScope)(!0);return o.run((()=>{o.run((()=>{let t,o,i=!(!n.nodes.value.length&&!n.edges.value.length);t=p([e.modelValue,()=>{var t,n;return null==(n=null==(t=e.modelValue)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setElements(e),o||i||!e.length?null==o||o.resume():i=!0)})),o=p([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],(([n,o])=>{var i;(null==(i=e.modelValue)?void 0:i.value)&&Array.isArray(e.modelValue.value)&&(null==t||t.pause(),e.modelValue.value=[...n,...o],(0,r.nextTick)((()=>{null==t||t.resume()})))}),{immediate:i}),(0,r.onScopeDispose)((()=>{null==t||t.stop(),null==o||o.stop()}))})),o.run((()=>{let t,o,i=!!n.nodes.value.length;t=p([e.nodes,()=>{var t,n;return null==(n=null==(t=e.nodes)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setNodes(e),o||i||!e.length?null==o||o.resume():i=!0)})),o=p([n.nodes,()=>n.nodes.value.length],(([n])=>{var o;(null==(o=e.nodes)?void 0:o.value)&&Array.isArray(e.nodes.value)&&(null==t||t.pause(),e.nodes.value=[...n],(0,r.nextTick)((()=>{null==t||t.resume()})))}),{immediate:i}),(0,r.onScopeDispose)((()=>{null==t||t.stop(),null==o||o.stop()}))})),o.run((()=>{let t,o,i=!!n.edges.value.length;t=p([e.edges,()=>{var t,n;return null==(n=null==(t=e.edges)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setEdges(e),o||i||!e.length?null==o||o.resume():i=!0)})),o=p([n.edges,()=>n.edges.value.length],(([n])=>{var o;(null==(o=e.edges)?void 0:o.value)&&Array.isArray(e.edges.value)&&(null==t||t.pause(),e.edges.value=[...n],(0,r.nextTick)((()=>{null==t||t.resume()})))}),{immediate:i}),(0,r.onScopeDispose)((()=>{null==t||t.stop(),null==o||o.stop()}))})),o.run((()=>{(0,r.watch)((()=>t.minZoom),(()=>{t.minZoom&&bi(t.minZoom)&&n.setMinZoom(t.minZoom)}),{immediate:!0})})),o.run((()=>{(0,r.watch)((()=>t.maxZoom),(()=>{t.maxZoom&&bi(t.maxZoom)&&n.setMaxZoom(t.maxZoom)}),{immediate:!0})})),o.run((()=>{(0,r.watch)((()=>t.translateExtent),(()=>{t.translateExtent&&bi(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)}),{immediate:!0})})),o.run((()=>{(0,r.watch)((()=>t.nodeExtent),(()=>{t.nodeExtent&&bi(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)}),{immediate:!0})})),o.run((()=>{(0,r.watch)((()=>t.applyDefault),(()=>{bi(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),{immediate:!0})})),o.run((()=>{const e=async e=>{let o=e;"function"==typeof t.autoConnect&&(o=await t.autoConnect(e)),!1!==o&&n.addEdges([o])};(0,r.watch)((()=>t.autoConnect),(()=>{bi(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),{immediate:!0}),(0,r.watch)(n.autoConnect,((t,o,i)=>{t?n.onConnect(e):n.hooks.value.connect.off(e),i((()=>{n.hooks.value.connect.off(e)}))}),{immediate:!0})})),(()=>{const e=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const i of Object.keys(t)){const a=i;if(!e.includes(a)){const e=(0,r.toRef)((()=>t[a])),i=n[a];(0,r.isRef)(i)&&o.run((()=>{(0,r.watch)(e,(e=>{bi(e)&&(i.value=e)}),{immediate:!0})}))}}})()})),()=>o.stop()}({modelValue:l,nodes:u,edges:s},o,c);return function(e,t){(0,r.onBeforeMount)((()=>{for(const[n,o]of Object.entries(t.value)){const t=t=>{e(n,t)};o.fns.add(t),a((()=>{o.off(t)}))}}))}(n,c.hooks),function(){const e=kr();(0,r.watch)((()=>e.viewportHelper.value.viewportInitialized),(t=>{t&&setTimeout((()=>{e.emits.init(e),e.emits.paneReady(e)}),1)}))}(),function(){const{emits:e}=kr();(0,r.onMounted)((()=>{if(wi()){const t=document.querySelector(".vue-flow__pane");t&&"1"!==window.getComputedStyle(t).zIndex&&e.error(new ai(ii.MISSING_STYLES))}}))}(),(0,r.provide)(zi,i),(0,r.onUnmounted)((()=>{d()})),t(c),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{ref:(0,r.unref)(c).vueFlowRef,class:"vue-flow"},[(0,r.createVNode)(Br,null,{default:(0,r.withCtx)((()=>[(0,r.createVNode)(jr),Kr,(0,r.createVNode)(qr),(0,r.renderSlot)(e.$slots,"zoom-pane")])),_:3}),(0,r.renderSlot)(e.$slots,"default"),(0,r.createVNode)(Or)],512))}}),Qr=(0,r.defineComponent)({name:"Panel",compatConfig:{MODE:3},props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=kr(),o=(0,r.computed)((()=>`${t.position}`.split("-")));return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["vue-flow__panel",o.value]),style:(0,r.normalizeStyle)({pointerEvents:(0,r.unref)(n)?"none":"all"})},[(0,r.renderSlot)(e.$slots,"default")],6))}});var ea=(e=>(e.Lines="lines",e.Dots="dots",e))(ea||{});const ta=function({dimensions:e,size:t,color:n}){return(0,r.h)("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},na=function({radius:e,color:t}){return(0,r.h)("circle",{cx:e,cy:e,r:e,fill:t})};ea.Lines,ea.Dots;const oa={[ea.Dots]:"#81818a",[ea.Lines]:"#eee"},ia=["id","x","y","width","height","patternTransform"],ra={key:2,height:"100",width:"100"},aa=["fill"],la=["x","y","fill"],ua=(0,r.defineComponent)({name:"Background",compatConfig:{MODE:3},props:{id:{},variant:{default:()=>ea.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=kr(),o=(0,r.computed)((()=>{const t=n.value.zoom,[o,i]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],r=[o*t||1,i*t||1],a=e.size*t,[l,u]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset];return{scaledGap:r,offset:[l*t||1+r[0]/2,u*t||1+r[1]/2],size:a}})),i=(0,r.toRef)((()=>`pattern-${t}${e.id?`-${e.id}`:""}`)),a=(0,r.toRef)((()=>e.color||e.patternColor||oa[e.variant||ea.Dots]));return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("svg",{class:"vue-flow__background vue-flow__container",style:(0,r.normalizeStyle)({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[(0,r.renderSlot)(e.$slots,"pattern-container",{id:i.value},(()=>[(0,r.createElementVNode)("pattern",{id:i.value,x:(0,r.unref)(n).x%o.value.scaledGap[0],y:(0,r.unref)(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[(0,r.renderSlot)(e.$slots,"pattern",{},(()=>[e.variant===(0,r.unref)(ea).Lines?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(ta),{key:0,size:e.lineWidth,color:a.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):e.variant===(0,r.unref)(ea).Dots?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(na),{key:1,color:a.value,radius:o.value.size/2},null,8,["color","radius"])):(0,r.createCommentVNode)("",!0),e.bgColor?((0,r.openBlock)(),(0,r.createElementBlock)("svg",ra,[(0,r.createElementVNode)("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,aa)])):(0,r.createCommentVNode)("",!0)]))],8,ia)])),(0,r.createElementVNode)("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${i.value})`},null,8,la),(0,r.renderSlot)(e.$slots,"default",{id:i.value})],4))}});var sa="http://www.w3.org/1999/xhtml";const ca={svg:"http://www.w3.org/2000/svg",xhtml:sa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function da(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),ca.hasOwnProperty(t)?{space:ca[t],local:e}:e}function fa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===sa&&t.documentElement.namespaceURI===sa?t.createElement(e):t.createElementNS(n,e)}}function ha(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pa(e){var t=da(e);return(t.local?ha:fa)(t)}function va(){}function ga(e){return null==e?va:function(){return this.querySelector(e)}}function ma(){return[]}function ya(e){return function(t){return t.matches(e)}}var wa=Array.prototype.find;function xa(){return this.firstElementChild}var _a=Array.prototype.filter;function ba(){return Array.from(this.children)}function Ea(e){return new Array(e.length)}function Sa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Na(e,t,n,o,i,r){for(var a,l=0,u=t.length,s=r.length;l<s;++l)(a=t[l])?(a.__data__=r[l],o[l]=a):n[l]=new Sa(e,r[l]);for(;l<u;++l)(a=t[l])&&(i[l]=a)}function ka(e,t,n,o,i,r,a){var l,u,s,c=new Map,d=t.length,f=r.length,h=new Array(d);for(l=0;l<d;++l)(u=t[l])&&(h[l]=s=a.call(u,u.__data__,l,t)+"",c.has(s)?i[l]=u:c.set(s,u));for(l=0;l<f;++l)s=a.call(e,r[l],l,r)+"",(u=c.get(s))?(o[l]=u,u.__data__=r[l],c.delete(s)):n[l]=new Sa(e,r[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(h[l])===u&&(i[l]=u)}function Ca(e){return e.__data__}function Ma(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Ia(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pa(e){return function(){this.removeAttribute(e)}}function Aa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ba(e,t){return function(){this.setAttribute(e,t)}}function Ta(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function za(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Da(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Oa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function $a(e){return function(){this.style.removeProperty(e)}}function Va(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ra(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function La(e){return function(){delete this[e]}}function Ha(e,t){return function(){this[e]=t}}function Ya(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ga(e){return e.trim().split(/^|\s+/)}function Fa(e){return e.classList||new Xa(e)}function Xa(e){this._node=e,this._names=Ga(e.getAttribute("class")||"")}function Ua(e,t){for(var n=Fa(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function ja(e,t){for(var n=Fa(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Wa(e){return function(){Ua(this,e)}}function Za(e){return function(){ja(this,e)}}function qa(e,t){return function(){(t.apply(this,arguments)?Ua:ja)(this,e)}}function Ka(){this.textContent=""}function Ja(e){return function(){this.textContent=e}}function Qa(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function el(){this.innerHTML=""}function tl(e){return function(){this.innerHTML=e}}function nl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ol(){this.nextSibling&&this.parentNode.appendChild(this)}function il(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rl(){return null}function al(){var e=this.parentNode;e&&e.removeChild(this)}function ll(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ul(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sl(e){return function(){var t=this.__on;if(t){for(var n,o=0,i=-1,r=t.length;o<r;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function cl(e,t,n){return function(){var o,i=this.__on,r=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,l=i.length;a<l;++a)if((o=i[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),void(o.value=t);this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(o):this.__on=[o]}}function dl(e,t,n){var o=Oa(e),i=o.CustomEvent;"function"==typeof i?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function fl(e,t){return function(){return dl(this,e,t)}}function hl(e,t){return function(){return dl(this,e,t.apply(this,arguments))}}Sa.prototype={constructor:Sa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Xa.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var pl=[null];function vl(e,t){this._groups=e,this._parents=t}function gl(e){return"string"==typeof e?new vl([[document.querySelector(e)]],[document.documentElement]):new vl([[e]],pl)}function ml(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}vl.prototype={constructor:vl,select:function(e){"function"!=typeof e&&(e=ga(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a,l=t[i],u=l.length,s=o[i]=new Array(u),c=0;c<u;++c)(r=l[c])&&(a=e.call(r,r.__data__,c,l))&&("__data__"in r&&(a.__data__=r.__data__),s[c]=a);return new vl(o,this._parents)},selectAll:function(e){var t;e="function"==typeof e?function(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}(e):null==(t=e)?ma:function(){return this.querySelectorAll(t)};for(var n=this._groups,o=n.length,i=[],r=[],a=0;a<o;++a)for(var l,u=n[a],s=u.length,c=0;c<s;++c)(l=u[c])&&(i.push(e.call(l,l.__data__,c,u)),r.push(l));return new vl(i,r)},selectChild:function(e){return this.select(null==e?xa:function(e){return function(){return wa.call(this.children,e)}}("function"==typeof e?e:ya(e)))},selectChildren:function(e){return this.selectAll(null==e?ba:function(e){return function(){return _a.call(this.children,e)}}("function"==typeof e?e:ya(e)))},filter:function(e){var t;"function"!=typeof e&&(t=e,e=function(){return this.matches(t)});for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r)for(var a,l=n[r],u=l.length,s=i[r]=[],c=0;c<u;++c)(a=l[c])&&e.call(a,a.__data__,c,l)&&s.push(a);return new vl(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Ca);var n,o=t?ka:Na,i=this._parents,r=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=r.length,l=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var d=i[c],f=r[c],h=f.length,p=Ma(e.call(d,d&&d.__data__,c,i)),v=p.length,g=u[c]=new Array(v),m=l[c]=new Array(v);o(d,f,g,m,s[c]=new Array(h),p,t);for(var y,w,x=0,_=0;x<v;++x)if(y=g[x]){for(x>=_&&(_=x+1);!(w=m[_])&&++_<v;);y._next=w||null}}return(l=new vl(l,i))._enter=u,l._exit=s,l},enter:function(){return new vl(this._enter||this._groups.map(Ea),this._parents)},exit:function(){return new vl(this._exit||this._groups.map(Ea),this._parents)},join:function(e,t,n){var o=this.enter(),i=this,r=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?r.remove():n(r),o&&i?o.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),l=new Array(i),u=0;u<a;++u)for(var s,c=n[u],d=o[u],f=c.length,h=l[u]=new Array(f),p=0;p<f;++p)(s=c[p]||d[p])&&(h[p]=s);for(;u<i;++u)l[u]=n[u];return new vl(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,i=e[t],r=i.length-1,a=i[r];--r>=0;)(o=i[r])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Ia);for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a,l=n[r],u=l.length,s=i[r]=new Array(u),c=0;c<u;++c)(a=l[c])&&(s[c]=a);s.sort(t)}return new vl(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i,r=t[n],a=0,l=r.length;a<l;++a)(i=r[a])&&e.call(i,i.__data__,a,r);return this},attr:function(e,t){var n=da(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Aa:Pa:"function"==typeof t?n.local?Da:za:n.local?Ta:Ba)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?$a:"function"==typeof t?Ra:Va)(e,t,null==n?"":n)):function(e,t){return e.style.getPropertyValue(t)||Oa(e).getComputedStyle(e,null).getPropertyValue(t)}(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?La:"function"==typeof t?Ya:Ha)(e,t)):this.node()[e]},classed:function(e,t){var n=Ga(e+"");if(arguments.length<2){for(var o=Fa(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?qa:t?Wa:Za)(n,t))},text:function(e){return arguments.length?this.each(null==e?Ka:("function"==typeof e?Qa:Ja)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?el:("function"==typeof e?nl:tl)(e)):this.node().innerHTML},raise:function(){return this.each(ol)},lower:function(){return this.each(il)},append:function(e){var t="function"==typeof e?e:pa(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:pa(e),o=null==t?rl:"function"==typeof t?t:ga(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(al)},clone:function(e){return this.select(e?ul:ll)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,i,r=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=r.length;if(!(arguments.length<2)){for(l=t?cl:sl,o=0;o<a;++o)this.each(l(r[o],t,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(o=0,u=l[s];o<a;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?hl:fl)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,i=e[t],r=0,a=i.length;r<a;++r)(o=i[r])&&(yield o)}};var yl={value:()=>{}};function wl(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new xl(o)}function xl(e){this._=e}function _l(e,t){for(var n,o=0,i=e.length;o<i;++o)if((n=e[o]).name===t)return n.value}function bl(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=yl,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}xl.prototype=wl.prototype={constructor:xl,on:function(e,t){var n,o,i=this._,r=(o=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,l=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(n=(e=r[a]).type)i[n]=bl(i[n],e.name,t);else if(null==t)for(n in i)i[n]=bl(i[n],e.name,null);return this}for(;++a<l;)if((n=(e=r[a]).type)&&(n=_l(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new xl(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,i=new Array(n),r=0;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=0,n=(o=this._[e]).length;r<n;++r)o[r].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};const El={passive:!1},Sl={capture:!0,passive:!1};function Nl(e){e.stopImmediatePropagation()}function kl(e){e.preventDefault(),e.stopImmediatePropagation()}const Cl=e=>()=>e;function Ml(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:a,y:l,dx:u,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}function Il(e){return!e.ctrlKey&&!e.button}function Pl(){return this.parentNode}function Al(e,t){return null==t?{x:e.x,y:e.y}:t}function Bl(){return navigator.maxTouchPoints||"ontouchstart"in this}Ml.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Tl=(e=>(e.Line="line",e.Handle="handle",e))(Tl||{});const zl={[Tl.Line]:"right",[Tl.Handle]:"bottom-right"},Dl={[Tl.Line]:"borderColor",[Tl.Handle]:"backgroundColor"},Ol=(0,r.defineComponent)({name:"ResizeControl",compatConfig:{MODE:3},props:{nodeId:{},color:{},minWidth:{default:10},minHeight:{default:10},maxWidth:{default:Number.MAX_VALUE},maxHeight:{default:Number.MAX_VALUE},position:{},variant:{default:"handle"},shouldResize:{},keepAspectRatio:{type:[Boolean,Number],default:!1}},emits:["resizeStart","resize","resizeEnd"],setup(e,{emit:t}){const n=e,o={width:0,height:0,x:0,y:0},i={...o,pointerX:0,pointerY:0,aspectRatio:1},{findNode:a,emits:l}=kr(),u=Oi(),s=(0,r.ref)();let c=i,d=o;const f=(0,r.toRef)((()=>n.position??zl[n.variant])),h=(0,r.toRef)((()=>f.value.split("-"))),p=(0,r.toRef)((()=>n.color?{[Dl[n.variant]]:n.color}:{}));return(0,r.watchEffect)((e=>{if(!s.value||!n.nodeId)return;const o=gl(s.value),i=f.value.includes("right")||f.value.includes("left"),r=f.value.includes("bottom")||f.value.includes("top"),h=f.value.includes("left"),p=f.value.includes("top"),v=function(){var e,t,n,o,i=Il,r=Pl,a=Al,l=Bl,u={},s=wl("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",g).on("touchmove.drag",m,El).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,l){if(!o&&i.call(this,a,l)){var u=w(this,r.call(this,a,l),a,l,"mouse");u&&(gl(a.view).on("mousemove.drag",p,Sl).on("mouseup.drag",v,Sl),function(e){var t=e.document.documentElement,n=gl(e).on("dragstart.drag",kl,Sl);"onselectstart"in t?n.on("selectstart.drag",kl,Sl):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(a.view),Nl(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function p(o){if(kl(o),!n){var i=o.clientX-e,r=o.clientY-t;n=i*i+r*r>d}u.mouse("drag",o)}function v(e){gl(e.view).on("mousemove.drag mouseup.drag",null),function(e,t){var n=e.document.documentElement,o=gl(e).on("dragstart.drag",null);t&&(o.on("click.drag",kl,Sl),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,n),kl(e),u.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,o,a=e.changedTouches,l=r.call(this,e,t),u=a.length;for(n=0;n<u;++n)(o=w(this,l,e,t,a[n].identifier,a[n]))&&(Nl(e),o("start",e,a[n]))}}function m(e){var t,n,o=e.changedTouches,i=o.length;for(t=0;t<i;++t)(n=u[o[t].identifier])&&(kl(e),n("drag",e,o[t]))}function y(e){var t,n,i=e.changedTouches,r=i.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<r;++t)(n=u[i[t].identifier])&&(Nl(e),n("end",e,i[t]))}function w(e,t,n,o,i,r){var l,d,h,p=s.copy(),v=ml(r||n,t);if(null!=(h=a.call(e,new Ml("beforestart",{sourceEvent:n,target:f,identifier:i,active:c,x:v[0],y:v[1],dx:0,dy:0,dispatch:p}),o)))return l=h.x-v[0]||0,d=h.y-v[1]||0,function n(r,a,s){var g,m=v;switch(r){case"start":u[i]=n,g=c++;break;case"end":delete u[i],--c;case"drag":v=ml(s||a,t),g=c}p.call(r,e,new Ml(r,{sourceEvent:a,subject:h,target:f,identifier:i,active:g,x:v[0]+l,y:v[1]+d,dx:v[0]-m[0],dy:v[1]-m[1],dispatch:p}),o)}}return f.filter=function(e){return arguments.length?(i="function"==typeof e?e:Cl(!!e),f):i},f.container=function(e){return arguments.length?(r="function"==typeof e?e:Cl(e),f):r},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:Cl(e),f):a},f.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Cl(!!e),f):l},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}().on("start",(e=>{const o=a(n.nodeId),{xSnapped:i,ySnapped:r}=u(e);d={width:(null==o?void 0:o.dimensions.width)??0,height:(null==o?void 0:o.dimensions.height)??0,x:(null==o?void 0:o.position.x)??0,y:(null==o?void 0:o.position.y)??0},c={...d,pointerX:i,pointerY:r,aspectRatio:d.width/d.height},t("resizeStart",{event:e,params:d})})).on("drag",(e=>{var o;const{xSnapped:s,ySnapped:f}=u(e),v=a(n.nodeId);if(v){const a=[],{pointerX:u,pointerY:g,width:m,height:y,x:w,y:x,aspectRatio:_}=c,{x:b,y:E,width:S,height:N}=d,k=Math.floor(i?s-u:0),C=Math.floor(r?f-g:0);let M=xo(m+(h?-k:k),n.minWidth,n.maxWidth),I=xo(y+(p?-C:C),n.minHeight,n.maxHeight);if(n.keepAspectRatio){const e=M/I;let t=_;"number"==typeof n.keepAspectRatio&&e!==n.keepAspectRatio&&(t=n.keepAspectRatio);const o=i&&r;M=e<=t&&o||r&&!i?I*t:M,I=e>t&&o||i&&!r?M/t:I,M>=n.maxWidth?(M=n.maxWidth,I=n.maxWidth/t):M<=n.minWidth&&(M=n.minWidth,I=n.minWidth/t),I>=n.maxHeight?(I=n.maxHeight,M=n.maxHeight*t):I<=n.minHeight&&(I=n.minHeight,M=n.minHeight*t)}const P=M!==S,A=I!==N;if(h||p){const e=h?w-(M-m):w,t=p?x-(I-y):x,n=e!==b&&P,o=t!==E&&A;if(n||o){const i={id:v.id,type:"position",from:v.position,position:{x:n?e:b,y:o?t:E}};a.push(i),d.x=i.position.x,d.y=i.position.y}}if(n.nodeId&&(P||A)){const e={id:n.nodeId,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:M,height:I}};a.push(e),d.width=M,d.height=I}if(0===a.length)return;const B=function({width:e,prevWidth:t,height:n,prevHeight:o,invertX:i,invertY:r}){const a=e-t,l=n-o,u=[a>0?1:a<0?-1:0,l>0?1:l<0?-1:0];return a&&i&&(u[0]=-1*u[0]),l&&r&&(u[1]=-1*u[1]),u}({width:d.width,prevWidth:S,height:d.height,prevHeight:N,invertX:h,invertY:p}),T={...d,direction:B};if(!1===(null==(o=n.shouldResize)?void 0:o.call(n,e,T)))return;t("resize",{event:e,params:T}),l.nodesChange(a)}})).on("end",(e=>{if(n.nodeId){const o={id:n.nodeId,type:"dimensions",resizing:!1};t("resizeEnd",{event:e,params:d}),l.nodesChange([o])}}));o.call(v),e((()=>{o.on(".drag",null)}))})),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{ref_key:"resizeControlRef",ref:s,class:(0,r.normalizeClass)(["vue-flow__resize-control nodrag",[...h.value,e.variant]]),style:(0,r.normalizeStyle)(p.value)},[(0,r.renderSlot)(e.$slots,"default")],6))}}),$l=(0,r.defineComponent)({name:"NodeResizer",compatConfig:{MODE:3},inheritAttrs:!1,props:{nodeId:{},color:{},handleClassName:{},handleStyle:{},lineClassName:{},lineStyle:{},isVisible:{type:Boolean,default:!0},minWidth:{},minHeight:{},maxWidth:{},maxHeight:{},shouldResize:{},keepAspectRatio:{type:[Boolean,Number]}},emits:["resizeStart","resize","resizeEnd"],setup(e,{emit:t}){const n=e,{findNode:o,emits:i}=kr(),a=["top-left","top-right","bottom-left","bottom-right"],l=["top","right","bottom","left"],u=(0,r.inject)(Pi,null),s=(0,r.toRef)((()=>"string"==typeof n.nodeId?n.nodeId:u)),c=(0,r.computed)((()=>o(s.value)));return(0,r.watch)([()=>n.minWidth,()=>n.minHeight,()=>n.maxWidth,()=>n.maxHeight,()=>{var e;return!!(null==(e=c.value)?void 0:e.dimensions.width)&&!!c.value.dimensions.height}],(([e,t,n,o,r])=>{const a=c.value;if(a&&r){const r={id:a.id,type:"dimensions",updateStyle:!0,dimensions:{width:a.dimensions.width,height:a.dimensions.height}};e&&a.dimensions.width<e&&(r.dimensions.width=e),t&&a.dimensions.height<t&&(r.dimensions.height=t),n&&a.dimensions.width>n&&(r.dimensions.width=n),o&&a.dimensions.height>o&&(r.dimensions.height=o),r.dimensions.width===a.dimensions.width&&r.dimensions.height===a.dimensions.height||i.nodesChange([r])}}),{flush:"post",immediate:!0}),(e,n)=>e.isVisible?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l,(o=>(0,r.createVNode)(Ol,{key:o,class:(0,r.normalizeClass)(e.lineClassName),style:(0,r.normalizeStyle)(e.lineStyle),"node-id":s.value,position:o,variant:(0,r.unref)(Tl).Line,"keep-aspect-ratio":e.keepAspectRatio,color:e.color,"min-width":e.minWidth,"min-height":e.minHeight,"max-width":e.maxWidth,"max-height":e.maxHeight,"should-resize":e.shouldResize,onResizeStart:n[0]||(n[0]=e=>t("resizeStart",e)),onResize:n[1]||(n[1]=e=>t("resize",e)),onResizeEnd:n[2]||(n[2]=e=>t("resizeEnd",e))},null,8,["class","style","node-id","position","variant","keep-aspect-ratio","color","min-width","min-height","max-width","max-height","should-resize"]))),64)),((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a,(o=>(0,r.createVNode)(Ol,{key:o,class:(0,r.normalizeClass)(e.handleClassName),style:(0,r.normalizeStyle)(e.handleStyle),"node-id":s.value,position:o,color:e.color,"min-width":e.minWidth,"min-height":e.minHeight,"max-width":e.maxWidth,"max-height":e.maxHeight,"should-resize":e.shouldResize,"keep-aspect-ratio":e.keepAspectRatio,onResizeStart:n[3]||(n[3]=e=>t("resizeStart",e)),onResize:n[4]||(n[4]=e=>t("resize",e)),onResizeEnd:n[5]||(n[5]=e=>t("resizeEnd",e))},null,8,["class","style","node-id","position","color","min-width","min-height","max-width","max-height","should-resize","keep-aspect-ratio"]))),64))],64)):(0,r.createCommentVNode)("",!0)}}),Vl={install:e=>{e.component("VueFlow",Jr),e.component("Panel",Qr),e.component("Background",ua),e.component("NodeResizer",$l)},VueFlow:Jr,Panel:Qr,Background:ua,Handle:Wi,Position:oo,NodeResizer:$l,useVueFlow:kr};return i.default})()));